{"version":3,"names":["cov_1jcx7swdl","actualCoverage","userService","s","require","BaseController","asyncHandler","AuthController","register","req","res","next","f","result","body","sendSuccess","login","getProfile","user","id","updateProfile","updatedUser","updatePassword","deleteAccount","getAllUsers","page","limit","getPaginationParams","query","sendPaginated","users","pagination","total","logout","toggleFavorite","validateRequestParams","params","destinationId","isFavorite","b","getFavorites","favorites","module","exports"],"sources":["auth.controller.js"],"sourcesContent":["/* eslint-disable no-param-reassign, class-methods-use-this, space-before-function-paren, no-unused-vars */\nconst userService = require('../services/user.service');\nconst BaseController = require('./base.controller');\nconst { asyncHandler } = require('../utils/asyncHandler');\n\nclass AuthController extends BaseController {\n  // Register new user\n  register = asyncHandler(async (req, res, next) => {\n    const result = await userService.register(req.body);\n    this.sendSuccess(res, result, 'User registered successfully', 201);\n  });\n\n  // Login user\n  login = asyncHandler(async (req, res, next) => {\n    const result = await userService.login(req.body);\n    this.sendSuccess(res, result, 'Login successful');\n  });\n\n  // Get current user profile\n  getProfile = asyncHandler(async (req, res, next) => {\n    const user = await userService.getProfile(req.user.id);\n    this.sendSuccess(res, { user }, 'Profile retrieved successfully');\n  });\n\n  // Update user profile\n  updateProfile = asyncHandler(async (req, res, next) => {\n    const updatedUser = await userService.updateProfile(req.user.id, req.body);\n    this.sendSuccess(res, { user: updatedUser }, 'Profile updated successfully');\n  });\n\n  // Update password\n  updatePassword = asyncHandler(async (req, res, next) => {\n    const result = await userService.updatePassword(req.user.id, req.body);\n    this.sendSuccess(res, result, 'Password updated successfully');\n  });\n\n  // Delete user account\n  deleteAccount = asyncHandler(async (req, res, next) => {\n    await userService.deleteAccount(req.user.id);\n    this.sendSuccess(res, null, 'Account deleted successfully', 204);\n  });\n\n  // Get all users\n  getAllUsers = asyncHandler(async (req, res, next) => {\n    const { page, limit } = this.getPaginationParams(req.query);\n    const result = await userService.getAllUsers({ page, limit });\n    this.sendPaginated(res, result.users, page, limit, result.pagination.total);\n  });\n\n  // Logout user\n  logout = asyncHandler(async (req, res, next) => {\n    // Clear the token from the client side\n    this.sendSuccess(res, null, 'Logged out successfully');\n  });\n\n  // Toggle favorite destination\n  toggleFavorite = asyncHandler(async (req, res, next) => {\n    this.validateRequestParams(req.params, ['destinationId']);\n    const result = await userService.toggleFavorite(req.user.id, req.params.destinationId);\n    this.sendSuccess(res, result, `Destination ${result.isFavorite ? 'added to' : 'removed from'} favorites`);\n  });\n\n  // Get user's favorite destinations\n  getFavorites = asyncHandler(async (req, res, next) => {\n    const favorites = await userService.getFavorites(req.user.id);\n    this.sendSuccess(res, { favorites }, 'Favorites retrieved successfully');\n  });\n}\n\nmodule.exports = new AuthController();\n"],"mappings":"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","ignoreList":[]}