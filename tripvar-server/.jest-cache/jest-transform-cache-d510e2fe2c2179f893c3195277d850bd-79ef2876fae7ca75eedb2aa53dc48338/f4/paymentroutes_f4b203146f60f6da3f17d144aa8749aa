892dee1d885d52512b41385a8f65be57
const express = require('express');
const {
  authenticate
} = require('../middleware/auth');
const {
  validateRequest,
  validationRules
} = require('../config/security');
const {
  processPayment,
  getPaymentStatus,
  processRefund,
  getPaymentHistory
} = require('../controllers/payment.controller');
const router = express.Router();

// All payment routes require authentication
router.use(authenticate);

// Payment processing routes
router.post('/booking/:bookingId/process', [validationRules.paymentMethod, validationRules.paymentDetails], validateRequest, processPayment);
router.get('/booking/:bookingId/status', getPaymentStatus);
router.post('/booking/:bookingId/refund', [validationRules.refundReason], validateRequest, processRefund);
router.get('/history', getPaymentHistory);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZSIsInZhbGlkYXRlUmVxdWVzdCIsInZhbGlkYXRpb25SdWxlcyIsInByb2Nlc3NQYXltZW50IiwiZ2V0UGF5bWVudFN0YXR1cyIsInByb2Nlc3NSZWZ1bmQiLCJnZXRQYXltZW50SGlzdG9yeSIsInJvdXRlciIsIlJvdXRlciIsInVzZSIsInBvc3QiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudERldGFpbHMiLCJnZXQiLCJyZWZ1bmRSZWFzb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicGF5bWVudC5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHsgYXV0aGVudGljYXRlIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcbmNvbnN0IHsgdmFsaWRhdGVSZXF1ZXN0LCB2YWxpZGF0aW9uUnVsZXMgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9zZWN1cml0eScpO1xuY29uc3Qge1xuICBwcm9jZXNzUGF5bWVudCxcbiAgZ2V0UGF5bWVudFN0YXR1cyxcbiAgcHJvY2Vzc1JlZnVuZCxcbiAgZ2V0UGF5bWVudEhpc3Rvcnlcbn0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9wYXltZW50LmNvbnRyb2xsZXInKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gQWxsIHBheW1lbnQgcm91dGVzIHJlcXVpcmUgYXV0aGVudGljYXRpb25cbnJvdXRlci51c2UoYXV0aGVudGljYXRlKTtcblxuLy8gUGF5bWVudCBwcm9jZXNzaW5nIHJvdXRlc1xucm91dGVyLnBvc3QoJy9ib29raW5nLzpib29raW5nSWQvcHJvY2VzcycsXG4gIFtcbiAgICB2YWxpZGF0aW9uUnVsZXMucGF5bWVudE1ldGhvZCxcbiAgICB2YWxpZGF0aW9uUnVsZXMucGF5bWVudERldGFpbHNcbiAgXSxcbiAgdmFsaWRhdGVSZXF1ZXN0LFxuICBwcm9jZXNzUGF5bWVudFxuKTtcblxucm91dGVyLmdldCgnL2Jvb2tpbmcvOmJvb2tpbmdJZC9zdGF0dXMnLCBnZXRQYXltZW50U3RhdHVzKTtcblxucm91dGVyLnBvc3QoJy9ib29raW5nLzpib29raW5nSWQvcmVmdW5kJyxcbiAgW1xuICAgIHZhbGlkYXRpb25SdWxlcy5yZWZ1bmRSZWFzb25cbiAgXSxcbiAgdmFsaWRhdGVSZXF1ZXN0LFxuICBwcm9jZXNzUmVmdW5kXG4pO1xuXG5yb3V0ZXIuZ2V0KCcvaGlzdG9yeScsIGdldFBheW1lbnRIaXN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQztBQUFhLENBQUMsR0FBR0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3RELE1BQU07RUFBRUUsZUFBZTtFQUFFQztBQUFnQixDQUFDLEdBQUdILE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMxRSxNQUFNO0VBQ0pJLGNBQWM7RUFDZEMsZ0JBQWdCO0VBQ2hCQyxhQUFhO0VBQ2JDO0FBQ0YsQ0FBQyxHQUFHUCxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFFaEQsTUFBTVEsTUFBTSxHQUFHVCxPQUFPLENBQUNVLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBRCxNQUFNLENBQUNFLEdBQUcsQ0FBQ1QsWUFBWSxDQUFDOztBQUV4QjtBQUNBTyxNQUFNLENBQUNHLElBQUksQ0FBQyw2QkFBNkIsRUFDdkMsQ0FDRVIsZUFBZSxDQUFDUyxhQUFhLEVBQzdCVCxlQUFlLENBQUNVLGNBQWMsQ0FDL0IsRUFDRFgsZUFBZSxFQUNmRSxjQUNGLENBQUM7QUFFREksTUFBTSxDQUFDTSxHQUFHLENBQUMsNEJBQTRCLEVBQUVULGdCQUFnQixDQUFDO0FBRTFERyxNQUFNLENBQUNHLElBQUksQ0FBQyw0QkFBNEIsRUFDdEMsQ0FDRVIsZUFBZSxDQUFDWSxZQUFZLENBQzdCLEVBQ0RiLGVBQWUsRUFDZkksYUFDRixDQUFDO0FBRURFLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLFVBQVUsRUFBRVAsaUJBQWlCLENBQUM7QUFFekNTLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVCxNQUFNIiwiaWdub3JlTGlzdCI6W119