96cd45c69a9422bd2ab9170d4fd19b31
// Mock external services before importing routes
_getJestObj().mock('../config/redis', () => ({
  connectRedis: jest.fn().mockResolvedValue(),
  disconnectRedis: jest.fn().mockResolvedValue(),
  getRedisClient: jest.fn(() => ({
    get: jest.fn().mockResolvedValue(null),
    set: jest.fn().mockResolvedValue('OK'),
    del: jest.fn().mockResolvedValue(1),
    exists: jest.fn().mockResolvedValue(0),
    expire: jest.fn().mockResolvedValue(1),
    flushall: jest.fn().mockResolvedValue('OK'),
    ping: jest.fn().mockResolvedValue('PONG'),
    quit: jest.fn().mockResolvedValue('OK'),
    status: 'ready'
  })),
  redisUtils: {
    deleteCache: jest.fn().mockResolvedValue(true),
    getCache: jest.fn().mockResolvedValue(null),
    setCache: jest.fn().mockResolvedValue('OK'),
    exists: jest.fn().mockResolvedValue(false),
    expire: jest.fn().mockResolvedValue(true),
    flushall: jest.fn().mockResolvedValue('OK')
  }
}));

// Mock security config with relaxed rate limiting for tests
_getJestObj().mock('../config/security', () => ({
  securityConfig: {
    authLimiter: (req, res, next) => next(),
    // Skip rate limiting in tests
    generalLimiter: (req, res, next) => next() // Skip rate limiting in tests
  },
  validationRules: {
    destinationTitle: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationDescription: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationImageUrl: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationRating: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationPrice: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationLocation: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    }),
    destinationCategory: Object.assign((req, res, next) => next(), {
      optional: () => (req, res, next) => next()
    })
  },
  validateRequest: (req, res, next) => next()
}));

// Mock redis config for tests
_getJestObj().mock('../config/redis', () => ({
  redisUtils: {
    setCache: jest.fn().mockResolvedValue(undefined),
    getCache: jest.fn().mockResolvedValue(null),
    deleteCache: jest.fn().mockResolvedValue(undefined),
    clearCache: jest.fn().mockResolvedValue(undefined),
    getCacheKeys: jest.fn().mockResolvedValue([]),
    getCacheInfo: jest.fn().mockResolvedValue({}),
    isConnected: jest.fn().mockReturnValue(true)
  },
  connectRedis: jest.fn().mockResolvedValue(undefined),
  getRedisClient: jest.fn().mockReturnValue({
    setex: jest.fn().mockResolvedValue('OK'),
    get: jest.fn().mockResolvedValue(null),
    del: jest.fn().mockResolvedValue(1),
    flushdb: jest.fn().mockResolvedValue('OK'),
    keys: jest.fn().mockResolvedValue([]),
    info: jest.fn().mockResolvedValue('redis_version:6.0.0')
  })
}));

// Import routes
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
// Test-specific app configuration that doesn't connect to external services
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const compression = require('compression');
const rateLimit = require('express-rate-limit');
const slowDown = require('express-slow-down');
const authRoutes = require('../routes/auth.routes');
const destinationRoutes = require('../routes/destination.routes');
const bookingRoutes = require('../routes/booking.routes');
const healthRoutes = require('../routes/health.routes');

// Import middleware
const errorHandler = require('../middleware/errorHandler');

// Create Express app
const app = express();

// Security middleware
app.use(helmet({
  contentSecurityPolicy: false,
  // Disable for testing
  crossOriginEmbedderPolicy: false
}));

// CORS configuration
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000', 'http://localhost:5173'],
  credentials: true
}));

// Compression middleware
app.use(compression());

// Rate limiting (relaxed for testing)
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  max: 1000,
  // limit each IP to 1000 requests per windowMs (increased for testing)
  message: 'Too many requests from this IP, please try again later.'
});
app.use('/api/', limiter);

// Speed limiting (relaxed for testing)
const speedLimiter = slowDown({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  delayAfter: 500,
  // allow 500 requests per 15 minutes, then... (increased for testing)
  delayMs: () => 100,
  // begin adding 100ms of delay per request above 500 (reduced for testing)
  validate: {
    delayMs: false
  } // Disable validation warning
});
app.use('/api/', speedLimiter);

// Body parsing middleware
app.use(express.json({
  limit: '10mb'
}));
app.use(express.urlencoded({
  extended: true,
  limit: '10mb'
}));

// Request validation middleware (disabled for tests)
// app.use(validateRequest);

// Routes
app.use('/api/v1/auth', authRoutes);
app.use('/api/v1/destinations', destinationRoutes);
app.use('/api/v1/bookings', bookingRoutes);
app.use('/health', healthRoutes);

// 404 handler for undefined routes
app.use('*', (req, res, next) => {
  const error = new Error(`Route ${req.originalUrl} not found`);
  error.statusCode = 404;
  error.status = 'fail';
  error.code = 'ROUTE_NOT_FOUND';
  error.isOperational = true;
  next(error);
});

// Error handling middleware (must be last)
app.use(errorHandler);
module.exports = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjb25uZWN0UmVkaXMiLCJqZXN0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRpc2Nvbm5lY3RSZWRpcyIsImdldFJlZGlzQ2xpZW50IiwiZ2V0Iiwic2V0IiwiZGVsIiwiZXhpc3RzIiwiZXhwaXJlIiwiZmx1c2hhbGwiLCJwaW5nIiwicXVpdCIsInN0YXR1cyIsInJlZGlzVXRpbHMiLCJkZWxldGVDYWNoZSIsImdldENhY2hlIiwic2V0Q2FjaGUiLCJzZWN1cml0eUNvbmZpZyIsImF1dGhMaW1pdGVyIiwicmVxIiwicmVzIiwibmV4dCIsImdlbmVyYWxMaW1pdGVyIiwidmFsaWRhdGlvblJ1bGVzIiwiZGVzdGluYXRpb25UaXRsZSIsIk9iamVjdCIsImFzc2lnbiIsIm9wdGlvbmFsIiwiZGVzdGluYXRpb25EZXNjcmlwdGlvbiIsImRlc3RpbmF0aW9uSW1hZ2VVcmwiLCJkZXN0aW5hdGlvblJhdGluZyIsImRlc3RpbmF0aW9uUHJpY2UiLCJkZXN0aW5hdGlvbkxvY2F0aW9uIiwiZGVzdGluYXRpb25DYXRlZ29yeSIsInZhbGlkYXRlUmVxdWVzdCIsInVuZGVmaW5lZCIsImNsZWFyQ2FjaGUiLCJnZXRDYWNoZUtleXMiLCJnZXRDYWNoZUluZm8iLCJpc0Nvbm5lY3RlZCIsIm1vY2tSZXR1cm5WYWx1ZSIsInNldGV4IiwiZmx1c2hkYiIsImtleXMiLCJpbmZvIiwicmVxdWlyZSIsImV4cHJlc3MiLCJjb3JzIiwiaGVsbWV0IiwiY29tcHJlc3Npb24iLCJyYXRlTGltaXQiLCJzbG93RG93biIsImF1dGhSb3V0ZXMiLCJkZXN0aW5hdGlvblJvdXRlcyIsImJvb2tpbmdSb3V0ZXMiLCJoZWFsdGhSb3V0ZXMiLCJlcnJvckhhbmRsZXIiLCJhcHAiLCJ1c2UiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5Iiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIkFMTE9XRURfT1JJR0lOUyIsInNwbGl0IiwiY3JlZGVudGlhbHMiLCJsaW1pdGVyIiwid2luZG93TXMiLCJtYXgiLCJtZXNzYWdlIiwic3BlZWRMaW1pdGVyIiwiZGVsYXlBZnRlciIsImRlbGF5TXMiLCJ2YWxpZGF0ZSIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImVycm9yIiwiRXJyb3IiLCJvcmlnaW5hbFVybCIsInN0YXR1c0NvZGUiLCJjb2RlIiwiaXNPcGVyYXRpb25hbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJhcHAudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUZXN0LXNwZWNpZmljIGFwcCBjb25maWd1cmF0aW9uIHRoYXQgZG9lc24ndCBjb25uZWN0IHRvIGV4dGVybmFsIHNlcnZpY2VzXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpO1xuY29uc3QgY29tcHJlc3Npb24gPSByZXF1aXJlKCdjb21wcmVzc2lvbicpO1xuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7XG5jb25zdCBzbG93RG93biA9IHJlcXVpcmUoJ2V4cHJlc3Mtc2xvdy1kb3duJyk7XG5cbi8vIE1vY2sgZXh0ZXJuYWwgc2VydmljZXMgYmVmb3JlIGltcG9ydGluZyByb3V0ZXNcbmplc3QubW9jaygnLi4vY29uZmlnL3JlZGlzJywgKCkgPT4gKHtcbiAgY29ubmVjdFJlZGlzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoKSxcbiAgZGlzY29ubmVjdFJlZGlzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoKSxcbiAgZ2V0UmVkaXNDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgICBzZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnT0snKSxcbiAgICBkZWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKSxcbiAgICBleGlzdHM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgwKSxcbiAgICBleHBpcmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKSxcbiAgICBmbHVzaGFsbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdPSycpLFxuICAgIHBpbmc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnUE9ORycpLFxuICAgIHF1aXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnT0snKSxcbiAgICBzdGF0dXM6ICdyZWFkeSdcbiAgfSkpLFxuICByZWRpc1V0aWxzOiB7XG4gICAgZGVsZXRlQ2FjaGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgICBnZXRDYWNoZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpLFxuICAgIHNldENhY2hlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJyksXG4gICAgZXhpc3RzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoZmFsc2UpLFxuICAgIGV4cGlyZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICAgIGZsdXNoYWxsOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJylcbiAgfVxufSkpO1xuXG4vLyBNb2NrIHNlY3VyaXR5IGNvbmZpZyB3aXRoIHJlbGF4ZWQgcmF0ZSBsaW1pdGluZyBmb3IgdGVzdHNcbmplc3QubW9jaygnLi4vY29uZmlnL3NlY3VyaXR5JywgKCkgPT4gKHtcbiAgc2VjdXJpdHlDb25maWc6IHtcbiAgICBhdXRoTGltaXRlcjogKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCksIC8vIFNraXAgcmF0ZSBsaW1pdGluZyBpbiB0ZXN0c1xuICAgIGdlbmVyYWxMaW1pdGVyOiAocmVxLCByZXMsIG5leHQpID0+IG5leHQoKSAvLyBTa2lwIHJhdGUgbGltaXRpbmcgaW4gdGVzdHNcbiAgfSxcbiAgdmFsaWRhdGlvblJ1bGVzOiB7XG4gICAgZGVzdGluYXRpb25UaXRsZTogT2JqZWN0LmFzc2lnbigocmVxLCByZXMsIG5leHQpID0+IG5leHQoKSwgeyBvcHRpb25hbDogKCkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCkgfSksXG4gICAgZGVzdGluYXRpb25EZXNjcmlwdGlvbjogT2JqZWN0LmFzc2lnbigocmVxLCByZXMsIG5leHQpID0+IG5leHQoKSwgeyBvcHRpb25hbDogKCkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCkgfSksXG4gICAgZGVzdGluYXRpb25JbWFnZVVybDogT2JqZWN0LmFzc2lnbigocmVxLCByZXMsIG5leHQpID0+IG5leHQoKSwgeyBvcHRpb25hbDogKCkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCkgfSksXG4gICAgZGVzdGluYXRpb25SYXRpbmc6IE9iamVjdC5hc3NpZ24oKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCksIHsgb3B0aW9uYWw6ICgpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gbmV4dCgpIH0pLFxuICAgIGRlc3RpbmF0aW9uUHJpY2U6IE9iamVjdC5hc3NpZ24oKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCksIHsgb3B0aW9uYWw6ICgpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gbmV4dCgpIH0pLFxuICAgIGRlc3RpbmF0aW9uTG9jYXRpb246IE9iamVjdC5hc3NpZ24oKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCksIHsgb3B0aW9uYWw6ICgpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gbmV4dCgpIH0pLFxuICAgIGRlc3RpbmF0aW9uQ2F0ZWdvcnk6IE9iamVjdC5hc3NpZ24oKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KCksIHsgb3B0aW9uYWw6ICgpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gbmV4dCgpIH0pXG4gIH0sXG4gIHZhbGlkYXRlUmVxdWVzdDogKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KClcbn0pKTtcblxuLy8gTW9jayByZWRpcyBjb25maWcgZm9yIHRlc3RzXG5qZXN0Lm1vY2soJy4uL2NvbmZpZy9yZWRpcycsICgpID0+ICh7XG4gIHJlZGlzVXRpbHM6IHtcbiAgICBzZXRDYWNoZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgZ2V0Q2FjaGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgICBkZWxldGVDYWNoZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgY2xlYXJDYWNoZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgZ2V0Q2FjaGVLZXlzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxuICAgIGdldENhY2hlSW5mbzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICBpc0Nvbm5lY3RlZDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKVxuICB9LFxuICBjb25uZWN0UmVkaXM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxuICBnZXRSZWRpc0NsaWVudDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgc2V0ZXg6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnT0snKSxcbiAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgICBkZWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKSxcbiAgICBmbHVzaGRiOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJyksXG4gICAga2V5czogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICBpbmZvOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ3JlZGlzX3ZlcnNpb246Ni4wLjAnKVxuICB9KVxufSkpO1xuXG4vLyBJbXBvcnQgcm91dGVzXG5jb25zdCBhdXRoUm91dGVzID0gcmVxdWlyZSgnLi4vcm91dGVzL2F1dGgucm91dGVzJyk7XG5jb25zdCBkZXN0aW5hdGlvblJvdXRlcyA9IHJlcXVpcmUoJy4uL3JvdXRlcy9kZXN0aW5hdGlvbi5yb3V0ZXMnKTtcbmNvbnN0IGJvb2tpbmdSb3V0ZXMgPSByZXF1aXJlKCcuLi9yb3V0ZXMvYm9va2luZy5yb3V0ZXMnKTtcbmNvbnN0IGhlYWx0aFJvdXRlcyA9IHJlcXVpcmUoJy4uL3JvdXRlcy9oZWFsdGgucm91dGVzJyk7XG5cbi8vIEltcG9ydCBtaWRkbGV3YXJlXG5jb25zdCBlcnJvckhhbmRsZXIgPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcicpO1xuXG4vLyBDcmVhdGUgRXhwcmVzcyBhcHBcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gU2VjdXJpdHkgbWlkZGxld2FyZVxuYXBwLnVzZShoZWxtZXQoe1xuICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IGZhbHNlLCAvLyBEaXNhYmxlIGZvciB0ZXN0aW5nXG4gIGNyb3NzT3JpZ2luRW1iZWRkZXJQb2xpY3k6IGZhbHNlXG59KSk7XG5cbi8vIENPUlMgY29uZmlndXJhdGlvblxuYXBwLnVzZShjb3JzKHtcbiAgb3JpZ2luOiBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlM/LnNwbGl0KCcsJykgfHwgWydodHRwOi8vbG9jYWxob3N0OjMwMDAnLCAnaHR0cDovL2xvY2FsaG9zdDo1MTczJ10sXG4gIGNyZWRlbnRpYWxzOiB0cnVlXG59KSk7XG5cbi8vIENvbXByZXNzaW9uIG1pZGRsZXdhcmVcbmFwcC51c2UoY29tcHJlc3Npb24oKSk7XG5cbi8vIFJhdGUgbGltaXRpbmcgKHJlbGF4ZWQgZm9yIHRlc3RpbmcpXG5jb25zdCBsaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dGVzXG4gIG1heDogMTAwMCwgLy8gbGltaXQgZWFjaCBJUCB0byAxMDAwIHJlcXVlc3RzIHBlciB3aW5kb3dNcyAoaW5jcmVhc2VkIGZvciB0ZXN0aW5nKVxuICBtZXNzYWdlOiAnVG9vIG1hbnkgcmVxdWVzdHMgZnJvbSB0aGlzIElQLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLidcbn0pO1xuYXBwLnVzZSgnL2FwaS8nLCBsaW1pdGVyKTtcblxuLy8gU3BlZWQgbGltaXRpbmcgKHJlbGF4ZWQgZm9yIHRlc3RpbmcpXG5jb25zdCBzcGVlZExpbWl0ZXIgPSBzbG93RG93bih7XG4gIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xuICBkZWxheUFmdGVyOiA1MDAsIC8vIGFsbG93IDUwMCByZXF1ZXN0cyBwZXIgMTUgbWludXRlcywgdGhlbi4uLiAoaW5jcmVhc2VkIGZvciB0ZXN0aW5nKVxuICBkZWxheU1zOiAoKSA9PiAxMDAsIC8vIGJlZ2luIGFkZGluZyAxMDBtcyBvZiBkZWxheSBwZXIgcmVxdWVzdCBhYm92ZSA1MDAgKHJlZHVjZWQgZm9yIHRlc3RpbmcpXG4gIHZhbGlkYXRlOiB7IGRlbGF5TXM6IGZhbHNlIH0gLy8gRGlzYWJsZSB2YWxpZGF0aW9uIHdhcm5pbmdcbn0pO1xuYXBwLnVzZSgnL2FwaS8nLCBzcGVlZExpbWl0ZXIpO1xuXG4vLyBCb2R5IHBhcnNpbmcgbWlkZGxld2FyZVxuYXBwLnVzZShleHByZXNzLmpzb24oeyBsaW1pdDogJzEwbWInIH0pKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUsIGxpbWl0OiAnMTBtYicgfSkpO1xuXG5cblxuLy8gUmVxdWVzdCB2YWxpZGF0aW9uIG1pZGRsZXdhcmUgKGRpc2FibGVkIGZvciB0ZXN0cylcbi8vIGFwcC51c2UodmFsaWRhdGVSZXF1ZXN0KTtcblxuLy8gUm91dGVzXG5hcHAudXNlKCcvYXBpL3YxL2F1dGgnLCBhdXRoUm91dGVzKTtcbmFwcC51c2UoJy9hcGkvdjEvZGVzdGluYXRpb25zJywgZGVzdGluYXRpb25Sb3V0ZXMpO1xuYXBwLnVzZSgnL2FwaS92MS9ib29raW5ncycsIGJvb2tpbmdSb3V0ZXMpO1xuYXBwLnVzZSgnL2hlYWx0aCcsIGhlYWx0aFJvdXRlcyk7XG5cbi8vIDQwNCBoYW5kbGVyIGZvciB1bmRlZmluZWQgcm91dGVzXG5hcHAudXNlKCcqJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBSb3V0ZSAke3JlcS5vcmlnaW5hbFVybH0gbm90IGZvdW5kYCk7XG4gIGVycm9yLnN0YXR1c0NvZGUgPSA0MDQ7XG4gIGVycm9yLnN0YXR1cyA9ICdmYWlsJztcbiAgZXJyb3IuY29kZSA9ICdST1VURV9OT1RfRk9VTkQnO1xuICBlcnJvci5pc09wZXJhdGlvbmFsID0gdHJ1ZTtcbiAgbmV4dChlcnJvcik7XG59KTtcblxuLy8gRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZSAobXVzdCBiZSBsYXN0KVxuYXBwLnVzZShlcnJvckhhbmRsZXIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDsiXSwibWFwcGluZ3MiOiJBQVFBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGlCQUFpQixFQUFFLE9BQU87RUFDbENDLFlBQVksRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0VBQzNDQyxlQUFlLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztFQUM5Q0UsY0FBYyxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQyxPQUFPO0lBQzdCSSxHQUFHLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3RDSSxHQUFHLEVBQUVOLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3RDSyxHQUFHLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0lBQ25DTSxNQUFNLEVBQUVSLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0lBQ3RDTyxNQUFNLEVBQUVULElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0lBQ3RDUSxRQUFRLEVBQUVWLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQzNDUyxJQUFJLEVBQUVYLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsTUFBTSxDQUFDO0lBQ3pDVSxJQUFJLEVBQUVaLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3ZDVyxNQUFNLEVBQUU7RUFDVixDQUFDLENBQUMsQ0FBQztFQUNIQyxVQUFVLEVBQUU7SUFDVkMsV0FBVyxFQUFFZixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztJQUM5Q2MsUUFBUSxFQUFFaEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFDM0NlLFFBQVEsRUFBRWpCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQzNDTSxNQUFNLEVBQUVSLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsS0FBSyxDQUFDO0lBQzFDTyxNQUFNLEVBQUVULElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3pDUSxRQUFRLEVBQUVWLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSTtFQUM1QztBQUNGLENBQUMsQ0FBQyxDQUFDOztB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