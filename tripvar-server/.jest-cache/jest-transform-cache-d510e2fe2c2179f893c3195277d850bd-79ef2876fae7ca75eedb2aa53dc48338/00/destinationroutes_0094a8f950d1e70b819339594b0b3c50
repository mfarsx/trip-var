fa9bcb874a1cf6c3ccaa8d175f511968
const express = require('express');
const {
  authenticate,
  authorize
} = require('../middleware/auth');
const {
  validateRequest,
  validationRules
} = require('../config/security');
const destinationController = require('../controllers/destination.controller');
const router = express.Router();

// Public routes
router.get('/', destinationController.getAllDestinations);
router.get('/:id', destinationController.getDestinationById);

// Admin only routes
router.post('/', authenticate, authorize('admin'), [validationRules.destinationTitle, validationRules.destinationDescription, validationRules.destinationImageUrl, validationRules.destinationRating, validationRules.destinationPrice, validationRules.destinationLocation, validationRules.destinationCategory], validateRequest, destinationController.createDestination);
router.put('/:id', authenticate, authorize('admin'), [validationRules.destinationTitle.optional(), validationRules.destinationDescription.optional(), validationRules.destinationImageUrl.optional(), validationRules.destinationRating.optional(), validationRules.destinationPrice.optional(), validationRules.destinationLocation.optional(), validationRules.destinationCategory.optional()], validateRequest, destinationController.updateDestination);
router.patch('/:id', authenticate, authorize('admin'), [validationRules.destinationTitle.optional(), validationRules.destinationDescription.optional(), validationRules.destinationImageUrl.optional(), validationRules.destinationRating.optional(), validationRules.destinationPrice.optional(), validationRules.destinationLocation.optional(), validationRules.destinationCategory.optional()], validateRequest, destinationController.updateDestination);
router.delete('/:id', authenticate, authorize('admin'), destinationController.deleteDestination);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZSIsImF1dGhvcml6ZSIsInZhbGlkYXRlUmVxdWVzdCIsInZhbGlkYXRpb25SdWxlcyIsImRlc3RpbmF0aW9uQ29udHJvbGxlciIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImdldEFsbERlc3RpbmF0aW9ucyIsImdldERlc3RpbmF0aW9uQnlJZCIsInBvc3QiLCJkZXN0aW5hdGlvblRpdGxlIiwiZGVzdGluYXRpb25EZXNjcmlwdGlvbiIsImRlc3RpbmF0aW9uSW1hZ2VVcmwiLCJkZXN0aW5hdGlvblJhdGluZyIsImRlc3RpbmF0aW9uUHJpY2UiLCJkZXN0aW5hdGlvbkxvY2F0aW9uIiwiZGVzdGluYXRpb25DYXRlZ29yeSIsImNyZWF0ZURlc3RpbmF0aW9uIiwicHV0Iiwib3B0aW9uYWwiLCJ1cGRhdGVEZXN0aW5hdGlvbiIsInBhdGNoIiwiZGVsZXRlIiwiZGVsZXRlRGVzdGluYXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiZGVzdGluYXRpb24ucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCB7IGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcbmNvbnN0IHsgdmFsaWRhdGVSZXF1ZXN0LCB2YWxpZGF0aW9uUnVsZXMgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9zZWN1cml0eScpO1xuY29uc3QgZGVzdGluYXRpb25Db250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvZGVzdGluYXRpb24uY29udHJvbGxlcicpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vLyBQdWJsaWMgcm91dGVzXG5yb3V0ZXIuZ2V0KCcvJywgZGVzdGluYXRpb25Db250cm9sbGVyLmdldEFsbERlc3RpbmF0aW9ucyk7XG5yb3V0ZXIuZ2V0KCcvOmlkJywgZGVzdGluYXRpb25Db250cm9sbGVyLmdldERlc3RpbmF0aW9uQnlJZCk7XG5cbi8vIEFkbWluIG9ubHkgcm91dGVzXG5yb3V0ZXIucG9zdCgnLycsXG4gIGF1dGhlbnRpY2F0ZSxcbiAgYXV0aG9yaXplKCdhZG1pbicpLFxuICBbXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uVGl0bGUsXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uRGVzY3JpcHRpb24sXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uSW1hZ2VVcmwsXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uUmF0aW5nLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvblByaWNlLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkxvY2F0aW9uLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkNhdGVnb3J5XG4gIF0sXG4gIHZhbGlkYXRlUmVxdWVzdCxcbiAgZGVzdGluYXRpb25Db250cm9sbGVyLmNyZWF0ZURlc3RpbmF0aW9uXG4pO1xuXG5yb3V0ZXIucHV0KCcvOmlkJyxcbiAgYXV0aGVudGljYXRlLFxuICBhdXRob3JpemUoJ2FkbWluJyksXG4gIFtcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25UaXRsZS5vcHRpb25hbCgpLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkRlc2NyaXB0aW9uLm9wdGlvbmFsKCksXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uSW1hZ2VVcmwub3B0aW9uYWwoKSxcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25SYXRpbmcub3B0aW9uYWwoKSxcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25QcmljZS5vcHRpb25hbCgpLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkxvY2F0aW9uLm9wdGlvbmFsKCksXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uQ2F0ZWdvcnkub3B0aW9uYWwoKVxuICBdLFxuICB2YWxpZGF0ZVJlcXVlc3QsXG4gIGRlc3RpbmF0aW9uQ29udHJvbGxlci51cGRhdGVEZXN0aW5hdGlvblxuKTtcblxucm91dGVyLnBhdGNoKCcvOmlkJyxcbiAgYXV0aGVudGljYXRlLFxuICBhdXRob3JpemUoJ2FkbWluJyksXG4gIFtcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25UaXRsZS5vcHRpb25hbCgpLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkRlc2NyaXB0aW9uLm9wdGlvbmFsKCksXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uSW1hZ2VVcmwub3B0aW9uYWwoKSxcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25SYXRpbmcub3B0aW9uYWwoKSxcbiAgICB2YWxpZGF0aW9uUnVsZXMuZGVzdGluYXRpb25QcmljZS5vcHRpb25hbCgpLFxuICAgIHZhbGlkYXRpb25SdWxlcy5kZXN0aW5hdGlvbkxvY2F0aW9uLm9wdGlvbmFsKCksXG4gICAgdmFsaWRhdGlvblJ1bGVzLmRlc3RpbmF0aW9uQ2F0ZWdvcnkub3B0aW9uYWwoKVxuICBdLFxuICB2YWxpZGF0ZVJlcXVlc3QsXG4gIGRlc3RpbmF0aW9uQ29udHJvbGxlci51cGRhdGVEZXN0aW5hdGlvblxuKTtcblxucm91dGVyLmRlbGV0ZSgnLzppZCcsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKCdhZG1pbicpLCBkZXN0aW5hdGlvbkNvbnRyb2xsZXIuZGVsZXRlRGVzdGluYXRpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsWUFBWTtFQUFFQztBQUFVLENBQUMsR0FBR0YsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ2pFLE1BQU07RUFBRUcsZUFBZTtFQUFF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