6dd5fb7123d416677e835c68ddf39713
const express = require('express');
const {
  createBooking,
  getUserBookings,
  getBookingById,
  cancelBooking,
  getAllBookings,
  updateBookingStatus,
  checkAvailability
} = require('../controllers/booking.controller');
const {
  authenticate,
  authorize
} = require('../middleware/auth');
const router = express.Router();

// All booking routes require authentication
router.use(authenticate);

// User booking routes
router.post('/', createBooking);
router.get('/my-bookings', getUserBookings);

// Availability check (must come before /:id route)
router.get('/check/availability', checkAvailability);
router.get('/:id', getBookingById);
router.put('/:id/cancel', cancelBooking);

// Admin routes
router.get('/admin/all', authorize('admin'), getAllBookings);
router.put('/admin/:id/status', authorize('admin'), updateBookingStatus);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNyZWF0ZUJvb2tpbmciLCJnZXRVc2VyQm9va2luZ3MiLCJnZXRCb29raW5nQnlJZCIsImNhbmNlbEJvb2tpbmciLCJnZXRBbGxCb29raW5ncyIsInVwZGF0ZUJvb2tpbmdTdGF0dXMiLCJjaGVja0F2YWlsYWJpbGl0eSIsImF1dGhlbnRpY2F0ZSIsImF1dGhvcml6ZSIsInJvdXRlciIsIlJvdXRlciIsInVzZSIsInBvc3QiLCJnZXQiLCJwdXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiYm9va2luZy5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHtcbiAgY3JlYXRlQm9va2luZyxcbiAgZ2V0VXNlckJvb2tpbmdzLFxuICBnZXRCb29raW5nQnlJZCxcbiAgY2FuY2VsQm9va2luZyxcbiAgZ2V0QWxsQm9va2luZ3MsXG4gIHVwZGF0ZUJvb2tpbmdTdGF0dXMsXG4gIGNoZWNrQXZhaWxhYmlsaXR5XG59ID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvYm9va2luZy5jb250cm9sbGVyJyk7XG5jb25zdCB7IGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gQWxsIGJvb2tpbmcgcm91dGVzIHJlcXVpcmUgYXV0aGVudGljYXRpb25cbnJvdXRlci51c2UoYXV0aGVudGljYXRlKTtcblxuLy8gVXNlciBib29raW5nIHJvdXRlc1xucm91dGVyLnBvc3QoJy8nLCBjcmVhdGVCb29raW5nKTtcbnJvdXRlci5nZXQoJy9teS1ib29raW5ncycsIGdldFVzZXJCb29raW5ncyk7XG5cbi8vIEF2YWlsYWJpbGl0eSBjaGVjayAobXVzdCBjb21lIGJlZm9yZSAvOmlkIHJvdXRlKVxucm91dGVyLmdldCgnL2NoZWNrL2F2YWlsYWJpbGl0eScsIGNoZWNrQXZhaWxhYmlsaXR5KTtcblxucm91dGVyLmdldCgnLzppZCcsIGdldEJvb2tpbmdCeUlkKTtcbnJvdXRlci5wdXQoJy86aWQvY2FuY2VsJywgY2FuY2VsQm9va2luZyk7XG5cbi8vIEFkbWluIHJvdXRlc1xucm91dGVyLmdldCgnL2FkbWluL2FsbCcsIGF1dGhvcml6ZSgnYWRtaW4nKSwgZ2V0QWxsQm9va2luZ3MpO1xucm91dGVyLnB1dCgnL2FkbWluLzppZC9zdGF0dXMnLCBhdXRob3JpemUoJ2FkbWluJyksIHVwZGF0ZUJvb2tpbmdTdGF0dXMpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQ0pDLGFBQWE7RUFDYkMsZUFBZTtFQUNmQyxjQUFjO0VBQ2RDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxtQkFBbUI7RUFDbkJDO0FBQ0YsQ0FBQyxHQUFHUCxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDaEQsTUFBTTtFQUFFUSxZQUFZO0VBQUVDO0FBQVUsQ0FBQyxHQUFHVCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFakUsTUFBTVUsTUFBTSxHQUFHWCxPQUFPLENBQUNZLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBRCxNQUFNLENBQUNFLEdBQUcsQ0FBQ0osWUFBWSxDQUFDOztBQUV4QjtBQUNBRSxNQUFNLENBQUNHLElBQUksQ0FBQyxHQUFHLEVBQUVaLGFBQWEsQ0FBQztBQUMvQlMsTUFBTSxDQUFDSSxHQUFHLENBQUMsY0FBYyxFQUFFWixlQUFlLENBQUM7O0FBRTNDO0FBQ0FRLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLHFCQUFxQixFQUFFUCxpQkFBaUIsQ0FBQztBQUVwREcsTUFBTSxDQUFDSSxHQUFHLENBQUMsTUFBTSxFQUFFWCxjQUFjLENBQUM7QUFDbENPLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLGFBQWEsRUFBRVgsYUFBYSxDQUFDOztBQUV4QztBQUNBTSxNQUFNLENBQUNJLEdBQUcsQ0FBQyxZQUFZLEVBQUVMLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRUosY0FBYyxDQUFDO0FBQzVESyxNQUFNLENBQUNLLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRU4sU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFSCxtQkFBbUIsQ0FBQztBQUV4RVUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=