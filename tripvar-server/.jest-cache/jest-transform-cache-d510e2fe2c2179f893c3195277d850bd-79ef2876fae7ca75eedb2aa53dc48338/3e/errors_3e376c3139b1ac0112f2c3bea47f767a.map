{"version":3,"names":["AppError","Error","constructor","message","statusCode","details","code","status","startsWith","isOperational","timestamp","Date","toISOString","captureStackTrace","toJSON","name","NotFoundError","ValidationError","UnauthorizedError","ForbiddenError","ConflictError","TooManyRequestsError","InternalServerError","ServiceUnavailableError","DatabaseError","ExternalServiceError","AuthenticationError","AuthorizationError","RateLimitError","BusinessLogicError","createError","notFound","validation","unauthorized","forbidden","conflict","tooManyRequests","internal","serviceUnavailable","database","externalService","authentication","authorization","rateLimit","businessLogic","errorCodes","RESOURCE_NOT_FOUND","VALIDATION_ERROR","UNAUTHORIZED","FORBIDDEN","CONFLICT","TOO_MANY_REQUESTS","INTERNAL_SERVER_ERROR","SERVICE_UNAVAILABLE","DATABASE_ERROR","EXTERNAL_SERVICE_ERROR","AUTHENTICATION_ERROR","AUTHORIZATION_ERROR","RATE_LIMIT_EXCEEDED","BUSINESS_LOGIC_ERROR","module","exports"],"sources":["errors.js"],"sourcesContent":["class AppError extends Error {\n  constructor(message, statusCode, details = null, code = null) {\n    super(message);\n    this.statusCode = statusCode;\n    this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\n    this.isOperational = true;\n    this.details = details;\n    this.code = code;\n    this.timestamp = new Date().toISOString();\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n\n  toJSON() {\n    return {\n      name: this.constructor.name,\n      message: this.message,\n      statusCode: this.statusCode,\n      status: this.status,\n      details: this.details,\n      code: this.code,\n      timestamp: this.timestamp\n    };\n  }\n}\n\nclass NotFoundError extends AppError {\n  constructor(message = 'Resource not found', details = null) {\n    super(message, 404, details, 'RESOURCE_NOT_FOUND');\n  }\n}\n\nclass ValidationError extends AppError {\n  constructor(message = 'Validation failed', details = null) {\n    super(message, 400, details, 'VALIDATION_ERROR');\n  }\n}\n\nclass UnauthorizedError extends AppError {\n  constructor(message = 'Unauthorized access', details = null) {\n    super(message, 401, details, 'UNAUTHORIZED');\n  }\n}\n\nclass ForbiddenError extends AppError {\n  constructor(message = 'Forbidden access', details = null) {\n    super(message, 403, details, 'FORBIDDEN');\n  }\n}\n\nclass ConflictError extends AppError {\n  constructor(message = 'Resource conflict', details = null) {\n    super(message, 409, details, 'CONFLICT');\n  }\n}\n\nclass TooManyRequestsError extends AppError {\n  constructor(message = 'Too many requests', details = null) {\n    super(message, 429, details, 'TOO_MANY_REQUESTS');\n  }\n}\n\nclass InternalServerError extends AppError {\n  constructor(message = 'Internal server error', details = null) {\n    super(message, 500, details, 'INTERNAL_SERVER_ERROR');\n  }\n}\n\nclass ServiceUnavailableError extends AppError {\n  constructor(message = 'Service unavailable', details = null) {\n    super(message, 503, details, 'SERVICE_UNAVAILABLE');\n  }\n}\n\nclass DatabaseError extends AppError {\n  constructor(message = 'Database error', details = null) {\n    super(message, 500, details, 'DATABASE_ERROR');\n  }\n}\n\nclass ExternalServiceError extends AppError {\n  constructor(message = 'External service error', details = null) {\n    super(message, 502, details, 'EXTERNAL_SERVICE_ERROR');\n  }\n}\n\nclass AuthenticationError extends AppError {\n  constructor(message = 'Authentication failed', details = null) {\n    super(message, 401, details, 'AUTHENTICATION_ERROR');\n  }\n}\n\nclass AuthorizationError extends AppError {\n  constructor(message = 'Authorization failed', details = null) {\n    super(message, 403, details, 'AUTHORIZATION_ERROR');\n  }\n}\n\nclass RateLimitError extends AppError {\n  constructor(message = 'Rate limit exceeded', details = null) {\n    super(message, 429, details, 'RATE_LIMIT_EXCEEDED');\n  }\n}\n\nclass BusinessLogicError extends AppError {\n  constructor(message = 'Business logic error', details = null) {\n    super(message, 422, details, 'BUSINESS_LOGIC_ERROR');\n  }\n}\n\n// Error factory for creating specific error types\nconst createError = {\n  notFound: (message, details) => new NotFoundError(message, details),\n  validation: (message, details) => new ValidationError(message, details),\n  unauthorized: (message, details) => new UnauthorizedError(message, details),\n  forbidden: (message, details) => new ForbiddenError(message, details),\n  conflict: (message, details) => new ConflictError(message, details),\n  tooManyRequests: (message, details) => new TooManyRequestsError(message, details),\n  internal: (message, details) => new InternalServerError(message, details),\n  serviceUnavailable: (message, details) => new ServiceUnavailableError(message, details),\n  database: (message, details) => new DatabaseError(message, details),\n  externalService: (message, details) => new ExternalServiceError(message, details),\n  authentication: (message, details) => new AuthenticationError(message, details),\n  authorization: (message, details) => new AuthorizationError(message, details),\n  rateLimit: (message, details) => new RateLimitError(message, details),\n  businessLogic: (message, details) => new BusinessLogicError(message, details)\n};\n\n// Error codes mapping for client-side handling\nconst errorCodes = {\n  RESOURCE_NOT_FOUND: 'The requested resource was not found',\n  VALIDATION_ERROR: 'The provided data is invalid',\n  UNAUTHORIZED: 'Authentication is required',\n  FORBIDDEN: 'You do not have permission to perform this action',\n  CONFLICT: 'The resource already exists or conflicts with existing data',\n  TOO_MANY_REQUESTS: 'Too many requests, please try again later',\n  INTERNAL_SERVER_ERROR: 'An internal server error occurred',\n  SERVICE_UNAVAILABLE: 'The service is temporarily unavailable',\n  DATABASE_ERROR: 'A database error occurred',\n  EXTERNAL_SERVICE_ERROR: 'An external service error occurred',\n  AUTHENTICATION_ERROR: 'Authentication failed',\n  AUTHORIZATION_ERROR: 'Authorization failed',\n  RATE_LIMIT_EXCEEDED: 'Rate limit exceeded',\n  BUSINESS_LOGIC_ERROR: 'Business logic validation failed'\n};\n\nmodule.exports = {\n  AppError,\n  NotFoundError,\n  ValidationError,\n  UnauthorizedError,\n  ForbiddenError,\n  ConflictError,\n  TooManyRequestsError,\n  InternalServerError,\n  ServiceUnavailableError,\n  DatabaseError,\n  ExternalServiceError,\n  AuthenticationError,\n  AuthorizationError,\n  RateLimitError,\n  BusinessLogicError,\n  createError,\n  errorCodes\n};\n"],"mappings":"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","ignoreList":[]}