a608865f467814e927e4a34d0cf92748
const express = require('express');
const {
  authenticate,
  authorize
} = require('../middleware/auth');
const {
  validateRequest,
  validationRules
} = require('../config/security');
const {
  getUserNotifications,
  markNotificationsAsRead,
  deleteNotifications,
  getNotificationById,
  getNotificationStats,
  createNotification,
  getAllNotifications
} = require('../controllers/notification.controller');
const router = express.Router();

// All notification routes require authentication
router.use(authenticate);

// User notification routes
router.get('/', getUserNotifications);
router.get('/stats', getNotificationStats);
router.get('/:notificationId', getNotificationById);
router.put('/mark-read', [validationRules.notificationIds.optional()], validateRequest, markNotificationsAsRead);
router.delete('/', [validationRules.notificationIds], validateRequest, deleteNotifications);

// Admin routes
router.post('/admin/create', authorize('admin'), [validationRules.notificationUserId, validationRules.notificationTitle, validationRules.notificationMessage, validationRules.notificationType, validationRules.notificationPriority.optional()], validateRequest, createNotification);
router.get('/admin/all', authorize('admin'), getAllNotifications);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZSIsImF1dGhvcml6ZSIsInZhbGlkYXRlUmVxdWVzdCIsInZhbGlkYXRpb25SdWxlcyIsImdldFVzZXJOb3RpZmljYXRpb25zIiwibWFya05vdGlmaWNhdGlvbnNBc1JlYWQiLCJkZWxldGVOb3RpZmljYXRpb25zIiwiZ2V0Tm90aWZpY2F0aW9uQnlJZCIsImdldE5vdGlmaWNhdGlvblN0YXRzIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiZ2V0QWxsTm90aWZpY2F0aW9ucyIsInJvdXRlciIsIlJvdXRlciIsInVzZSIsImdldCIsInB1dCIsIm5vdGlmaWNhdGlvbklkcyIsIm9wdGlvbmFsIiwiZGVsZXRlIiwicG9zdCIsIm5vdGlmaWNhdGlvblVzZXJJZCIsIm5vdGlmaWNhdGlvblRpdGxlIiwibm90aWZpY2F0aW9uTWVzc2FnZSIsIm5vdGlmaWNhdGlvblR5cGUiLCJub3RpZmljYXRpb25Qcmlvcml0eSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJub3RpZmljYXRpb24ucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCB7IGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcbmNvbnN0IHsgdmFsaWRhdGVSZXF1ZXN0LCB2YWxpZGF0aW9uUnVsZXMgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9zZWN1cml0eScpO1xuY29uc3Qge1xuICBnZXRVc2VyTm90aWZpY2F0aW9ucyxcbiAgbWFya05vdGlmaWNhdGlvbnNBc1JlYWQsXG4gIGRlbGV0ZU5vdGlmaWNhdGlvbnMsXG4gIGdldE5vdGlmaWNhdGlvbkJ5SWQsXG4gIGdldE5vdGlmaWNhdGlvblN0YXRzLFxuICBjcmVhdGVOb3RpZmljYXRpb24sXG4gIGdldEFsbE5vdGlmaWNhdGlvbnNcbn0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9ub3RpZmljYXRpb24uY29udHJvbGxlcicpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vLyBBbGwgbm90aWZpY2F0aW9uIHJvdXRlcyByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG5yb3V0ZXIudXNlKGF1dGhlbnRpY2F0ZSk7XG5cbi8vIFVzZXIgbm90aWZpY2F0aW9uIHJvdXRlc1xucm91dGVyLmdldCgnLycsIGdldFVzZXJOb3RpZmljYXRpb25zKTtcbnJvdXRlci5nZXQoJy9zdGF0cycsIGdldE5vdGlmaWNhdGlvblN0YXRzKTtcbnJvdXRlci5nZXQoJy86bm90aWZpY2F0aW9uSWQnLCBnZXROb3RpZmljYXRpb25CeUlkKTtcblxucm91dGVyLnB1dCgnL21hcmstcmVhZCcsXG4gIFtcbiAgICB2YWxpZGF0aW9uUnVsZXMubm90aWZpY2F0aW9uSWRzLm9wdGlvbmFsKClcbiAgXSxcbiAgdmFsaWRhdGVSZXF1ZXN0LFxuICBtYXJrTm90aWZpY2F0aW9uc0FzUmVhZFxuKTtcblxucm91dGVyLmRlbGV0ZSgnLycsXG4gIFtcbiAgICB2YWxpZGF0aW9uUnVsZXMubm90aWZpY2F0aW9uSWRzXG4gIF0sXG4gIHZhbGlkYXRlUmVxdWVzdCxcbiAgZGVsZXRlTm90aWZpY2F0aW9uc1xuKTtcblxuLy8gQWRtaW4gcm91dGVzXG5yb3V0ZXIucG9zdCgnL2FkbWluL2NyZWF0ZScsXG4gIGF1dGhvcml6ZSgnYWRtaW4nKSxcbiAgW1xuICAgIHZhbGlkYXRpb25SdWxlcy5ub3RpZmljYXRpb25Vc2VySWQsXG4gICAgdmFsaWRhdGlvblJ1bGVzLm5vdGlmaWNhdGlvblRpdGxlLFxuICAgIHZhbGlkYXRpb25SdWxlcy5ub3RpZmljYXRpb25NZXNzYWdlLFxuICAgIHZhbGlkYXRpb25SdWxlcy5ub3RpZmljYXRpb25UeXBlLFxuICAgIHZhbGlkYXRpb25SdWxlcy5ub3RpZmljYXRpb25Qcmlvcml0eS5vcHRpb25hbCgpXG4gIF0sXG4gIHZhbGlkYXRlUmVxdWVzdCxcbiAgY3JlYXRlTm90aWZpY2F0aW9uXG4pO1xuXG5yb3V0ZXIuZ2V0KCcvYWRtaW4vYWxsJywgYXV0aG9yaXplKCdhZG1pbicpLCBnZXRBbGxOb3RpZmljYXRpb25zKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxZQUFZO0VBQUVDO0FBQVUsQ0FBQyxHQUFHRixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDakUsTUFBTTtFQUFFRyxlQUFlO0VBQUVDO0FBQWdCLENBQUMsR0FBR0osT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQzFFLE1BQU07RUFDSkssb0JBQW9CO0VBQ3BCQyx1QkFBdUI7RUFDdkJDLG1CQUFtQjtFQUNuQkMsbUJBQW1CO0VBQ25CQyxvQkFBb0I7RUFDcEJDLGtCQUFrQjtFQUNsQkM7QUFDRixDQUFDLEdBQUdYLE9BQU8sQ0FBQyx3Q0FBd0MsQ0FBQztBQUVyRCxNQUFNWSxNQUFNLEdBQUdiLE9BQU8sQ0FBQ2MsTUFBTSxDQUFDLENBQUM7O0FBRS9CO0FBQ0FELE1BQU0sQ0FBQ0UsR0FBRyxDQUFDYixZQUFZLENBQUM7O0FBRXhCO0FBQ0FXLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRVYsb0JBQW9CLENBQUM7QUFDckNPLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFFBQVEsRUFBRU4sb0JBQW9CLENBQUM7QUFDMUNHLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGtCQUFrQixFQUFFUCxtQkFBbUIsQ0FBQztBQUVuREksTUFBTSxDQUFDSSxHQUFHLENBQUMsWUFBWSxFQUNyQixDQUNFWixlQUFlLENBQUNhLGVBQWUsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsQ0FDM0MsRUFDRGYsZUFBZSxFQUNmRyx1QkFDRixDQUFDO0FBRURNLE1BQU0sQ0FBQ08sTUFBTSxDQUFDLEdBQUcsRUFDZixDQUNFZixlQUFlLENBQUNhLGVBQWUsQ0FDaEMsRUFDRGQsZUFBZSxFQUNmSSxtQkFDRixDQUFDOztBQUVEO0FBQ0FLLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDLGVBQWUsRUFDekJsQixTQUFTLENBQUMsT0FBTyxDQUFDLEVBQ2xCLENBQ0VFLGVBQWUsQ0FBQ2lCLGtCQUFrQixFQUNsQ2pCLGVBQWUsQ0FBQ2tCLGlCQUFpQixFQUNqQ2xCLGVBQWUsQ0FBQ21CLG1CQUFtQixFQUNuQ25CLGVBQWUsQ0FBQ29CLGdCQUFnQixFQUNoQ3BCLGVBQWUsQ0FBQ3FCLG9CQUFvQixDQUFDUCxRQUFRLENBQUMsQ0FBQyxDQUNoRCxFQUNEZixlQUFlLEVBQ2ZPLGtCQUNGLENBQUM7QUFFREUsTUFBTSxDQUFDRyxHQUFHLENBQUMsWUFBWSxFQUFFYixTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUVTLG1CQUFtQixDQUFDO0FBRWpFZSxNQUFNLENBQUNDLE9BQU8sR0FBR2YsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==