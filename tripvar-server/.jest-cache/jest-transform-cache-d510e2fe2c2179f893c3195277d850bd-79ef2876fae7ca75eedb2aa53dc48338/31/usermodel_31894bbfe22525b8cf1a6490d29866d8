9e874adb50e5dd2f1c5ed1d62bb70eee
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

// List of countries with their codes for flag display
const COUNTRIES = [{
  name: 'Afghanistan',
  code: 'AF'
}, {
  name: 'Albania',
  code: 'AL'
}, {
  name: 'Algeria',
  code: 'DZ'
}, {
  name: 'Andorra',
  code: 'AD'
}, {
  name: 'Angola',
  code: 'AO'
}, {
  name: 'Argentina',
  code: 'AR'
}, {
  name: 'Australia',
  code: 'AU'
}, {
  name: 'Austria',
  code: 'AT'
}, {
  name: 'Azerbaijan',
  code: 'AZ'
}, {
  name: 'Bahamas',
  code: 'BS'
}, {
  name: 'Bahrain',
  code: 'BH'
}, {
  name: 'Bangladesh',
  code: 'BD'
}, {
  name: 'Belgium',
  code: 'BE'
}, {
  name: 'Brazil',
  code: 'BR'
}, {
  name: 'Canada',
  code: 'CA'
}, {
  name: 'China',
  code: 'CN'
}, {
  name: 'Denmark',
  code: 'DK'
}, {
  name: 'Egypt',
  code: 'EG'
}, {
  name: 'Finland',
  code: 'FI'
}, {
  name: 'France',
  code: 'FR'
}, {
  name: 'Germany',
  code: 'DE'
}, {
  name: 'Greece',
  code: 'GR'
}, {
  name: 'Hong Kong',
  code: 'HK'
}, {
  name: 'Iceland',
  code: 'IS'
}, {
  name: 'India',
  code: 'IN'
}, {
  name: 'Indonesia',
  code: 'ID'
}, {
  name: 'Iran',
  code: 'IR'
}, {
  name: 'Iraq',
  code: 'IQ'
}, {
  name: 'Ireland',
  code: 'IE'
}, {
  name: 'Israel',
  code: 'IL'
}, {
  name: 'Italy',
  code: 'IT'
}, {
  name: 'Japan',
  code: 'JP'
}, {
  name: 'Kazakhstan',
  code: 'KZ'
}, {
  name: 'Kenya',
  code: 'KE'
}, {
  name: 'Kuwait',
  code: 'KW'
}, {
  name: 'Malaysia',
  code: 'MY'
}, {
  name: 'Mexico',
  code: 'MX'
}, {
  name: 'Netherlands',
  code: 'NL'
}, {
  name: 'New Zealand',
  code: 'NZ'
}, {
  name: 'Norway',
  code: 'NO'
}, {
  name: 'Pakistan',
  code: 'PK'
}, {
  name: 'Philippines',
  code: 'PH'
}, {
  name: 'Poland',
  code: 'PL'
}, {
  name: 'Portugal',
  code: 'PT'
}, {
  name: 'Qatar',
  code: 'QA'
}, {
  name: 'Russia',
  code: 'RU'
}, {
  name: 'Saudi Arabia',
  code: 'SA'
}, {
  name: 'Singapore',
  code: 'SG'
}, {
  name: 'South Africa',
  code: 'ZA'
}, {
  name: 'South Korea',
  code: 'KR'
}, {
  name: 'Spain',
  code: 'ES'
}, {
  name: 'Sweden',
  code: 'SE'
}, {
  name: 'Switzerland',
  code: 'CH'
}, {
  name: 'Taiwan',
  code: 'TW'
}, {
  name: 'Thailand',
  code: 'TH'
}, {
  name: 'Turkey',
  code: 'TR'
}, {
  name: 'Ukraine',
  code: 'UA'
}, {
  name: 'United Arab Emirates',
  code: 'AE'
}, {
  name: 'United Kingdom',
  code: 'GB'
}, {
  name: 'United States',
  code: 'US'
}, {
  name: 'Vietnam',
  code: 'VN'
}].sort((a, b) => a.name.localeCompare(b.name));
const userSchema = new mongoose.Schema({
  email: {
    type: String,
    required: [true, 'Email is required'],
    unique: true,
    lowercase: true,
    trim: true,
    validate: {
      validator: function (v) {
        return /^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(v);
      },
      message: props => `${props.value} is not a valid email!`
    }
  },
  password: {
    type: String,
    required: [true, 'Password is required'],
    minlength: [6, 'Password must be at least 6 characters long'],
    select: false
  },
  name: {
    type: String,
    required: [true, 'Name is required'],
    trim: true
  },
  dateOfBirth: {
    type: Date,
    required: false,
    validate: {
      validator: function (v) {
        if (!v) {
          return true;
        } // Allow empty value
        const today = new Date();
        const birthDate = new Date(v);
        const age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();

        // Calculate actual age considering month and day
        const isOldEnough = monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate() ? age - 1 : age;
        return isOldEnough >= 20; // Minimum age requirement updated to 20
      },
      message: 'User must be at least 20 years old'
    }
  },
  nationality: {
    type: String,
    required: false,
    trim: true,
    validate: {
      validator: function (v) {
        if (!v) {
          return true;
        } // Allow empty value
        return COUNTRIES.some(country => country.name === v);
      },
      message: props => `${props.value} is not a valid country name`
    }
  },
  role: {
    type: String,
    enum: ['user', 'admin'],
    default: 'user'
  },
  favorites: {
    type: [mongoose.Schema.Types.ObjectId],
    ref: 'Destination',
    default: []
  },
  createdAt: {
    type: Date,
    default: Date.now
  },
  passwordChangedAt: Date,
  passwordResetToken: String,
  passwordResetExpires: Date,
  active: {
    type: Boolean,
    default: true,
    select: true
  }
}, {
  timestamps: true,
  toJSON: {
    virtuals: true,
    transform: function (doc, ret) {
      delete ret.password; // Always remove password
      return ret;
    }
  },
  toObject: {
    virtuals: true,
    transform: function (doc, ret) {
      delete ret.password; // Always remove password
      return ret;
    }
  }
});

// Hash password before saving
userSchema.pre('save', async function (next) {
  if (!this.isModified('password')) {
    return next();
  }
  this.password = await bcrypt.hash(this.password, 12);
  next();
});

// Compare password method
userSchema.methods.comparePassword = async function (candidatePassword) {
  return await bcrypt.compare(candidatePassword, this.password);
};

// Generate JWT token
userSchema.methods.generateAuthToken = function () {
  return jwt.sign({
    id: this._id,
    role: this.role
  }, process.env.JWT_SECRET, {
    expiresIn: process.env.JWT_EXPIRES_IN
  });
};

// Check if password was changed after token was issued
userSchema.methods.changedPasswordAfter = function (JWTTimestamp) {
  if (this.passwordChangedAt) {
    const changedTimestamp = parseInt(this.passwordChangedAt.getTime() / 1000, 10);
    return JWTTimestamp < changedTimestamp;
  }
  return false;
};

// Virtual field for age
userSchema.virtual('age').get(function () {
  if (!this.dateOfBirth) {
    return null;
  }
  const today = new Date();
  const birthDate = new Date(this.dateOfBirth);
  let age = today.getFullYear() - birthDate.getFullYear();
  const monthDiff = today.getMonth() - birthDate.getMonth();

  // Adjust age if birthday hasn't occurred this year
  if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {
    age--;
  }
  return age;
});
const User = mongoose.model('User', userSchema);
module.exports = User;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJqd3QiLCJDT1VOVFJJRVMiLCJuYW1lIiwiY29kZSIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiZW1haWwiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJsb3dlcmNhc2UiLCJ0cmltIiwidmFsaWRhdGUiLCJ2YWxpZGF0b3IiLCJ2IiwidGVzdCIsIm1lc3NhZ2UiLCJwcm9wcyIsInZhbHVlIiwicGFzc3dvcmQiLCJtaW5sZW5ndGgiLCJzZWxlY3QiLCJkYXRlT2ZCaXJ0aCIsIkRhdGUiLCJ0b2RheSIsImJpcnRoRGF0ZSIsImFnZSIsImdldEZ1bGxZZWFyIiwibW9udGhEaWZmIiwiZ2V0TW9udGgiLCJpc09sZEVub3VnaCIsImdldERhdGUiLCJuYXRpb25hbGl0eSIsInNvbWUiLCJjb3VudHJ5Iiwicm9sZSIsImVudW0iLCJkZWZhdWx0IiwiZmF2b3JpdGVzIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImNyZWF0ZWRBdCIsIm5vdyIsInBhc3N3b3JkQ2hhbmdlZEF0IiwicGFzc3dvcmRSZXNldFRva2VuIiwicGFzc3dvcmRSZXNldEV4cGlyZXMiLCJhY3RpdmUiLCJCb29sZWFuIiwidGltZXN0YW1wcyIsInRvSlNPTiIsInZpcnR1YWxzIiwidHJhbnNmb3JtIiwiZG9jIiwicmV0IiwidG9PYmplY3QiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImhhc2giLCJtZXRob2RzIiwiY29tcGFyZVBhc3N3b3JkIiwiY2FuZGlkYXRlUGFzc3dvcmQiLCJjb21wYXJlIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJzaWduIiwiaWQiLCJfaWQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsIkpXVF9FWFBJUkVTX0lOIiwiY2hhbmdlZFBhc3N3b3JkQWZ0ZXIiLCJKV1RUaW1lc3RhbXAiLCJjaGFuZ2VkVGltZXN0YW1wIiwicGFyc2VJbnQiLCJnZXRUaW1lIiwidmlydHVhbCIsImdldCIsIlVzZXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VyLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcblxuLy8gTGlzdCBvZiBjb3VudHJpZXMgd2l0aCB0aGVpciBjb2RlcyBmb3IgZmxhZyBkaXNwbGF5XG5jb25zdCBDT1VOVFJJRVMgPSBbXG4gIHsgbmFtZTogJ0FmZ2hhbmlzdGFuJywgY29kZTogJ0FGJyB9LFxuICB7IG5hbWU6ICdBbGJhbmlhJywgY29kZTogJ0FMJyB9LFxuICB7IG5hbWU6ICdBbGdlcmlhJywgY29kZTogJ0RaJyB9LFxuICB7IG5hbWU6ICdBbmRvcnJhJywgY29kZTogJ0FEJyB9LFxuICB7IG5hbWU6ICdBbmdvbGEnLCBjb2RlOiAnQU8nIH0sXG4gIHsgbmFtZTogJ0FyZ2VudGluYScsIGNvZGU6ICdBUicgfSxcbiAgeyBuYW1lOiAnQXVzdHJhbGlhJywgY29kZTogJ0FVJyB9LFxuICB7IG5hbWU6ICdBdXN0cmlhJywgY29kZTogJ0FUJyB9LFxuICB7IG5hbWU6ICdBemVyYmFpamFuJywgY29kZTogJ0FaJyB9LFxuICB7IG5hbWU6ICdCYWhhbWFzJywgY29kZTogJ0JTJyB9LFxuICB7IG5hbWU6ICdCYWhyYWluJywgY29kZTogJ0JIJyB9LFxuICB7IG5hbWU6ICdCYW5nbGFkZXNoJywgY29kZTogJ0JEJyB9LFxuICB7IG5hbWU6ICdCZWxnaXVtJywgY29kZTogJ0JFJyB9LFxuICB7IG5hbWU6ICdCcmF6aWwnLCBjb2RlOiAnQlInIH0sXG4gIHsgbmFtZTogJ0NhbmFkYScsIGNvZGU6ICdDQScgfSxcbiAgeyBuYW1lOiAnQ2hpbmEnLCBjb2RlOiAnQ04nIH0sXG4gIHsgbmFtZTogJ0Rlbm1hcmsnLCBjb2RlOiAnREsnIH0sXG4gIHsgbmFtZTogJ0VneXB0JywgY29kZTogJ0VHJyB9LFxuICB7IG5hbWU6ICdGaW5sYW5kJywgY29kZTogJ0ZJJyB9LFxuICB7IG5hbWU6ICdGcmFuY2UnLCBjb2RlOiAnRlInIH0sXG4gIHsgbmFtZTogJ0dlcm1hbnknLCBjb2RlOiAnREUnIH0sXG4gIHsgbmFtZTogJ0dyZWVjZScsIGNvZGU6ICdHUicgfSxcbiAgeyBuYW1lOiAnSG9uZyBLb25nJywgY29kZTogJ0hLJyB9LFxuICB7IG5hbWU6ICdJY2VsYW5kJywgY29kZTogJ0lTJyB9LFxuICB7IG5hbWU6ICdJbmRpYScsIGNvZGU6ICdJTicgfSxcbiAgeyBuYW1lOiAnSW5kb25lc2lhJywgY29kZTogJ0lEJyB9LFxuICB7IG5hbWU6ICdJcmFuJywgY29kZTogJ0lSJyB9LFxuICB7IG5hbWU6ICdJcmFxJywgY29kZTogJ0lRJyB9LFxuICB7IG5hbWU6ICdJcmVsYW5kJywgY29kZTogJ0lFJyB9LFxuICB7IG5hbWU6ICdJc3JhZWwnLCBjb2RlOiAnSUwnIH0sXG4gIHsgbmFtZTogJ0l0YWx5JywgY29kZTogJ0lUJyB9LFxuICB7IG5hbWU6ICdKYXBhbicsIGNvZGU6ICdKUCcgfSxcbiAgeyBuYW1lOiAnS2F6YWtoc3RhbicsIGNvZGU6ICdLWicgfSxcbiAgeyBuYW1lOiAnS2VueWEnLCBjb2RlOiAnS0UnIH0sXG4gIHsgbmFtZTogJ0t1d2FpdCcsIGNvZGU6ICdLVycgfSxcbiAgeyBuYW1lOiAnTWFsYXlzaWEnLCBjb2RlOiAnTVknIH0sXG4gIHsgbmFtZTogJ01leGljbycsIGNvZGU6ICdNWCcgfSxcbiAgeyBuYW1lOiAnTmV0aGVybGFuZHMnLCBjb2RlOiAnTkwnIH0sXG4gIHsgbmFtZTogJ05ldyBaZWFsYW5kJywgY29kZTogJ05aJyB9LFxuICB7IG5hbWU6ICdOb3J3YXknLCBjb2RlOiAnTk8nIH0sXG4gIHsgbmFtZTogJ1Bha2lzdGFuJywgY29kZTogJ1BLJyB9LFxuICB7IG5hbWU6ICdQaGlsaXBwaW5lcycsIGNvZGU6ICdQSCcgfSxcbiAgeyBuYW1lOiAnUG9sYW5kJywgY29kZTogJ1BMJyB9LFxuICB7IG5hbWU6ICdQb3J0dWdhbCcsIGNvZGU6ICdQVCcgfSxcbiAgeyBuYW1lOiAnUWF0YXInLCBjb2RlOiAnUUEnIH0sXG4gIHsgbmFtZTogJ1J1c3NpYScsIGNvZGU6ICdSVScgfSxcbiAgeyBuYW1lOiAnU2F1ZGkgQXJhYmlhJywgY29kZTogJ1NBJyB9LFxuICB7IG5hbWU6ICdTaW5nYXBvcmUnLCBjb2RlOiAnU0cnIH0sXG4gIHsgbmFtZTogJ1NvdXRoIEFmcmljYScsIGNvZGU6ICdaQScgfSxcbiAgeyBuYW1lOiAnU291dGggS29yZWEnLCBjb2RlOiAnS1InIH0sXG4gIHsgbmFtZTogJ1NwYWluJywgY29kZTogJ0VTJyB9LFxuICB7IG5hbWU6ICdTd2VkZW4nLCBjb2RlOiAnU0UnIH0sXG4gIHsgbmFtZTogJ1N3aXR6ZXJsYW5kJywgY29kZTogJ0NIJyB9LFxuICB7IG5hbWU6ICdUYWl3YW4nLCBjb2RlOiAnVFcnIH0sXG4gIHsgbmFtZTogJ1RoYWlsYW5kJywgY29kZTogJ1RIJyB9LFxuICB7IG5hbWU6ICdUdXJrZXknLCBjb2RlOiAnVFInIH0sXG4gIHsgbmFtZTogJ1VrcmFpbmUnLCBjb2RlOiAnVUEnIH0sXG4gIHsgbmFtZTogJ1VuaXRlZCBBcmFiIEVtaXJhdGVzJywgY29kZTogJ0FFJyB9LFxuICB7IG5hbWU6ICdVbml0ZWQgS2luZ2RvbScsIGNvZGU6ICdHQicgfSxcbiAgeyBuYW1lOiAnVW5pdGVkIFN0YXRlcycsIGNvZGU6ICdVUycgfSxcbiAgeyBuYW1lOiAnVmlldG5hbScsIGNvZGU6ICdWTicgfVxuXS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdFbWFpbCBpcyByZXF1aXJlZCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgdHJpbTogdHJ1ZSxcbiAgICB2YWxpZGF0ZToge1xuICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiAvXlxcdysoWy4tXT9cXHcrKSpAXFx3KyhbLi1dP1xcdyspKihcXC5cXHd7MiwzfSkrJC8udGVzdCh2KTtcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiBwcm9wcyA9PiBgJHtwcm9wcy52YWx1ZX0gaXMgbm90IGEgdmFsaWQgZW1haWwhYFxuICAgIH1cbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGFzc3dvcmQgaXMgcmVxdWlyZWQnXSxcbiAgICBtaW5sZW5ndGg6IFs2LCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZyddLFxuICAgIHNlbGVjdDogZmFsc2VcbiAgfSxcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdOYW1lIGlzIHJlcXVpcmVkJ10sXG4gICAgdHJpbTogdHJ1ZVxuICB9LFxuICBkYXRlT2ZCaXJ0aDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgaWYgKCF2KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gQWxsb3cgZW1wdHkgdmFsdWVcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBiaXJ0aERhdGUgPSBuZXcgRGF0ZSh2KTtcbiAgICAgICAgY29uc3QgYWdlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSAtIGJpcnRoRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCBtb250aERpZmYgPSB0b2RheS5nZXRNb250aCgpIC0gYmlydGhEYXRlLmdldE1vbnRoKCk7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGFjdHVhbCBhZ2UgY29uc2lkZXJpbmcgbW9udGggYW5kIGRheVxuICAgICAgICBjb25zdCBpc09sZEVub3VnaCA9IG1vbnRoRGlmZiA8IDAgfHwgKG1vbnRoRGlmZiA9PT0gMCAmJiB0b2RheS5nZXREYXRlKCkgPCBiaXJ0aERhdGUuZ2V0RGF0ZSgpKVxuICAgICAgICAgID8gYWdlIC0gMVxuICAgICAgICAgIDogYWdlO1xuXG4gICAgICAgIHJldHVybiBpc09sZEVub3VnaCA+PSAyMDsgLy8gTWluaW11bSBhZ2UgcmVxdWlyZW1lbnQgdXBkYXRlZCB0byAyMFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6ICdVc2VyIG11c3QgYmUgYXQgbGVhc3QgMjAgeWVhcnMgb2xkJ1xuICAgIH1cbiAgfSxcbiAgbmF0aW9uYWxpdHk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHRyaW06IHRydWUsXG4gICAgdmFsaWRhdGU6IHtcbiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoIXYpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyBBbGxvdyBlbXB0eSB2YWx1ZVxuICAgICAgICByZXR1cm4gQ09VTlRSSUVTLnNvbWUoY291bnRyeSA9PiBjb3VudHJ5Lm5hbWUgPT09IHYpO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IHByb3BzID0+IGAke3Byb3BzLnZhbHVlfSBpcyBub3QgYSB2YWxpZCBjb3VudHJ5IG5hbWVgXG4gICAgfVxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsndXNlcicsICdhZG1pbiddLFxuICAgIGRlZmF1bHQ6ICd1c2VyJ1xuICB9LFxuICBmYXZvcml0ZXM6IHtcbiAgICB0eXBlOiBbbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkXSxcbiAgICByZWY6ICdEZXN0aW5hdGlvbicsXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgY3JlYXRlZEF0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICB9LFxuICBwYXNzd29yZENoYW5nZWRBdDogRGF0ZSxcbiAgcGFzc3dvcmRSZXNldFRva2VuOiBTdHJpbmcsXG4gIHBhc3N3b3JkUmVzZXRFeHBpcmVzOiBEYXRlLFxuICBhY3RpdmU6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgc2VsZWN0OiB0cnVlXG4gIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZSxcbiAgdG9KU09OOiB7XG4gICAgdmlydHVhbHM6IHRydWUsXG4gICAgdHJhbnNmb3JtOiBmdW5jdGlvbihkb2MsIHJldCkge1xuICAgICAgZGVsZXRlIHJldC5wYXNzd29yZDsgLy8gQWx3YXlzIHJlbW92ZSBwYXNzd29yZFxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH0sXG4gIHRvT2JqZWN0OiB7XG4gICAgdmlydHVhbHM6IHRydWUsXG4gICAgdHJhbnNmb3JtOiBmdW5jdGlvbihkb2MsIHJldCkge1xuICAgICAgZGVsZXRlIHJldC5wYXNzd29yZDsgLy8gQWx3YXlzIHJlbW92ZSBwYXNzd29yZFxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBIYXNoIHBhc3N3b3JkIGJlZm9yZSBzYXZpbmdcbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24obmV4dCkge1xuICBpZiAoIXRoaXMuaXNNb2RpZmllZCgncGFzc3dvcmQnKSkge1xuICAgIHJldHVybiBuZXh0KCk7XG4gIH1cbiAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIDEyKTtcbiAgbmV4dCgpO1xufSk7XG5cbi8vIENvbXBhcmUgcGFzc3dvcmQgbWV0aG9kXG51c2VyU2NoZW1hLm1ldGhvZHMuY29tcGFyZVBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24oY2FuZGlkYXRlUGFzc3dvcmQpIHtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKTtcbn07XG5cbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxudXNlclNjaGVtYS5tZXRob2RzLmdlbmVyYXRlQXV0aFRva2VuID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqd3Quc2lnbihcbiAgICB7IGlkOiB0aGlzLl9pZCwgcm9sZTogdGhpcy5yb2xlIH0sXG4gICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgICB7IGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4gfVxuICApO1xufTtcblxuLy8gQ2hlY2sgaWYgcGFzc3dvcmQgd2FzIGNoYW5nZWQgYWZ0ZXIgdG9rZW4gd2FzIGlzc3VlZFxudXNlclNjaGVtYS5tZXRob2RzLmNoYW5nZWRQYXNzd29yZEFmdGVyID0gZnVuY3Rpb24oSldUVGltZXN0YW1wKSB7XG4gIGlmICh0aGlzLnBhc3N3b3JkQ2hhbmdlZEF0KSB7XG4gICAgY29uc3QgY2hhbmdlZFRpbWVzdGFtcCA9IHBhcnNlSW50KHRoaXMucGFzc3dvcmRDaGFuZ2VkQXQuZ2V0VGltZSgpIC8gMTAwMCwgMTApO1xuICAgIHJldHVybiBKV1RUaW1lc3RhbXAgPCBjaGFuZ2VkVGltZXN0YW1wO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIFZpcnR1YWwgZmllbGQgZm9yIGFnZVxudXNlclNjaGVtYS52aXJ0dWFsKCdhZ2UnKS5nZXQoZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5kYXRlT2ZCaXJ0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBiaXJ0aERhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGVPZkJpcnRoKTtcbiAgbGV0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgbW9udGhEaWZmID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoRGF0ZS5nZXRNb250aCgpO1xuXG4gIC8vIEFkanVzdCBhZ2UgaWYgYmlydGhkYXkgaGFzbid0IG9jY3VycmVkIHRoaXMgeWVhclxuICBpZiAobW9udGhEaWZmIDwgMCB8fCAobW9udGhEaWZmID09PSAwICYmIHRvZGF5LmdldERhdGUoKSA8IGJpcnRoRGF0ZS5nZXREYXRlKCkpKSB7XG4gICAgYWdlLS07XG4gIH1cblxuICByZXR1cm4gYWdlO1xufSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDbEMsTUFBTUUsR0FBRyxHQUFHRixPQUFPLENBQUMsY0FBYyxDQUFDOztBQUVuQztBQUNBLE1BQU1HLFNBQVMsR0FBRyxDQUNoQjtFQUFFQyxJQUFJLEVBQUUsYUFBYTtFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQ25DO0VBQUVELElBQUksRUFBRSxTQUFTO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDL0I7RUFBRUQsSUFBSSxFQUFFLFNBQVM7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUMvQjtFQUFFRCxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQy9CO0VBQUVELElBQUksRUFBRSxRQUFRO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDOUI7RUFBRUQsSUFBSSxFQUFFLFdBQVc7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUNqQztFQUFFRCxJQUFJLEVBQUUsV0FBVztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQ2pDO0VBQUVELElBQUksRUFBRSxTQUFTO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDL0I7RUFBRUQsSUFBSSxFQUFFLFlBQVk7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUNsQztFQUFFRCxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQy9CO0VBQUVELElBQUksRUFBRSxTQUFTO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDL0I7RUFBRUQsSUFBSSxFQUFFLFlBQVk7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUNsQztFQUFFRCxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQy9CO0VBQUVELElBQUksRUFBRSxRQUFRO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDOUI7RUFBRUQsSUFBSSxFQUFFLFFBQVE7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUM5QjtFQUFFRCxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQzdCO0VBQUVELElBQUksRUFBRSxTQUFTO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDL0I7RUFBRUQsSUFBSSxFQUFFLE9BQU87RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUM3QjtFQUFFRCxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQy9CO0VBQUVELElBQUksRUFBRSxRQUFRO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDOUI7RUFBRUQsSUFBSSxFQUFFLFNBQVM7RUFBRUMsSUFBSSxFQUFFO0FBQUssQ0FBQyxFQUMvQjtFQUFFRCxJQUFJLEVBQUUsUUFBUTtFQUFFQyxJQUFJLEVBQUU7QUFBSyxDQUFDLEVBQzlCO0VBQUVELElBQUksRUFBRSxXQUFXO0VBQUVDLElBQUksRUFBRTtBQUFLLENBQUMsRUFDakM7RUFBRUQsSUFBSSxFQUFFLFNBQVM7RUFBRUMsSUFBSSxFQUFFO0FBQUss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