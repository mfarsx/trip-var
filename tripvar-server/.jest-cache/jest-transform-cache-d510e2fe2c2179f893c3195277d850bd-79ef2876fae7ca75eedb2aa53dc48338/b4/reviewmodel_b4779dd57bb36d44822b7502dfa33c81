5fbf2ce1a9a21545d7b78e8236b5c21d
const mongoose = require('mongoose');
const reviewSchema = new mongoose.Schema({
  // User who wrote the review
  user: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: [true, 'Review must belong to a user']
  },
  // Destination being reviewed
  destination: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Destination',
    required: [true, 'Review must be for a destination']
  },
  // Booking reference (optional - user can review without booking)
  booking: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Booking',
    required: false
  },
  // Review content
  title: {
    type: String,
    required: [true, 'Review title is required'],
    trim: true,
    maxlength: [100, 'Title cannot exceed 100 characters']
  },
  content: {
    type: String,
    required: [true, 'Review content is required'],
    trim: true,
    maxlength: [1000, 'Review content cannot exceed 1000 characters']
  },
  // Rating (1-5 stars)
  rating: {
    type: Number,
    required: [true, 'Rating is required'],
    min: [1, 'Rating must be at least 1'],
    max: [5, 'Rating cannot exceed 5']
  },
  // Additional ratings (optional)
  ratings: {
    cleanliness: {
      type: Number,
      min: 1,
      max: 5,
      required: false
    },
    location: {
      type: Number,
      min: 1,
      max: 5,
      required: false
    },
    value: {
      type: Number,
      min: 1,
      max: 5,
      required: false
    },
    service: {
      type: Number,
      min: 1,
      max: 5,
      required: false
    }
  },
  // Review status
  status: {
    type: String,
    enum: {
      values: ['pending', 'approved', 'rejected'],
      message: 'Status must be pending, approved, or rejected'
    },
    default: 'approved'
  },
  // Helpful votes
  helpfulVotes: {
    type: Number,
    default: 0
  },
  // Users who found this review helpful
  helpfulUsers: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  }],
  // Admin response (optional)
  adminResponse: {
    content: {
      type: String,
      maxlength: [500, 'Admin response cannot exceed 500 characters']
    },
    respondedBy: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'User'
    },
    respondedAt: {
      type: Date
    }
  }
}, {
  timestamps: true,
  toJSON: {
    virtuals: true
  },
  toObject: {
    virtuals: true
  }
});

// Index for better query performance
reviewSchema.index({
  destination: 1,
  createdAt: -1
});
reviewSchema.index({
  user: 1,
  destination: 1
}, {
  unique: true
}); // One review per user per destination
reviewSchema.index({
  status: 1
});
reviewSchema.index({
  rating: 1
});

// Virtual field for review age
reviewSchema.virtual('age').get(function () {
  const now = new Date();
  const created = new Date(this.createdAt);
  const diffTime = Math.abs(now - created);
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  if (diffDays === 1) {
    return '1 day ago';
  }
  if (diffDays < 7) {
    return `${diffDays} days ago`;
  }
  if (diffDays < 30) {
    return `${Math.ceil(diffDays / 7)} weeks ago`;
  }
  if (diffDays < 365) {
    return `${Math.ceil(diffDays / 30)} months ago`;
  }
  return `${Math.ceil(diffDays / 365)} years ago`;
});

// Static method to calculate average rating for a destination
reviewSchema.statics.calculateAverageRating = async function (destinationId) {
  const stats = await this.aggregate([{
    $match: {
      destination: destinationId,
      status: 'approved'
    }
  }, {
    $group: {
      _id: '$destination',
      nRating: {
        $sum: 1
      },
      avgRating: {
        $avg: '$rating'
      },
      avgCleanliness: {
        $avg: '$ratings.cleanliness'
      },
      avgLocation: {
        $avg: '$ratings.location'
      },
      avgValue: {
        $avg: '$ratings.value'
      },
      avgService: {
        $avg: '$ratings.service'
      }
    }
  }]);
  if (stats.length > 0) {
    await mongoose.model('Destination').findByIdAndUpdate(destinationId, {
      rating: Math.round(stats[0].avgRating * 10) / 10,
      ratingCount: stats[0].nRating
    });
  } else {
    await mongoose.model('Destination').findByIdAndUpdate(destinationId, {
      rating: 0,
      ratingCount: 0
    });
  }
};

// Post-save middleware to update destination rating
reviewSchema.post('save', function () {
  this.constructor.calculateAverageRating(this.destination);
});

// Post-remove middleware to update destination rating
reviewSchema.post('remove', function () {
  this.constructor.calculateAverageRating(this.destination);
});
const Review = mongoose.model('Review', reviewSchema);
module.exports = Review;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJyZXZpZXdTY2hlbWEiLCJTY2hlbWEiLCJ1c2VyIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImRlc3RpbmF0aW9uIiwiYm9va2luZyIsInRpdGxlIiwiU3RyaW5nIiwidHJpbSIsIm1heGxlbmd0aCIsImNvbnRlbnQiLCJyYXRpbmciLCJOdW1iZXIiLCJtaW4iLCJtYXgiLCJyYXRpbmdzIiwiY2xlYW5saW5lc3MiLCJsb2NhdGlvbiIsInZhbHVlIiwic2VydmljZSIsInN0YXR1cyIsImVudW0iLCJ2YWx1ZXMiLCJtZXNzYWdlIiwiZGVmYXVsdCIsImhlbHBmdWxWb3RlcyIsImhlbHBmdWxVc2VycyIsImFkbWluUmVzcG9uc2UiLCJyZXNwb25kZWRCeSIsInJlc3BvbmRlZEF0IiwiRGF0ZSIsInRpbWVzdGFtcHMiLCJ0b0pTT04iLCJ2aXJ0dWFscyIsInRvT2JqZWN0IiwiaW5kZXgiLCJjcmVhdGVkQXQiLCJ1bmlxdWUiLCJ2aXJ0dWFsIiwiZ2V0Iiwibm93IiwiY3JlYXRlZCIsImRpZmZUaW1lIiwiTWF0aCIsImFicyIsImRpZmZEYXlzIiwiY2VpbCIsInN0YXRpY3MiLCJjYWxjdWxhdGVBdmVyYWdlUmF0aW5nIiwiZGVzdGluYXRpb25JZCIsInN0YXRzIiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiJGdyb3VwIiwiX2lkIiwiblJhdGluZyIsIiRzdW0iLCJhdmdSYXRpbmciLCIkYXZnIiwiYXZnQ2xlYW5saW5lc3MiLCJhdmdMb2NhdGlvbiIsImF2Z1ZhbHVlIiwiYXZnU2VydmljZSIsImxlbmd0aCIsIm1vZGVsIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJyb3VuZCIsInJhdGluZ0NvdW50IiwicG9zdCIsImNvbnN0cnVjdG9yIiwiUmV2aWV3IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInJldmlldy5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmNvbnN0IHJldmlld1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICAvLyBVc2VyIHdobyB3cm90ZSB0aGUgcmV2aWV3XG4gICAgdXNlcjoge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiAnVXNlcicsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdSZXZpZXcgbXVzdCBiZWxvbmcgdG8gYSB1c2VyJ11cbiAgICB9LFxuXG4gICAgLy8gRGVzdGluYXRpb24gYmVpbmcgcmV2aWV3ZWRcbiAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiAnRGVzdGluYXRpb24nLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUmV2aWV3IG11c3QgYmUgZm9yIGEgZGVzdGluYXRpb24nXVxuICAgIH0sXG5cbiAgICAvLyBCb29raW5nIHJlZmVyZW5jZSAob3B0aW9uYWwgLSB1c2VyIGNhbiByZXZpZXcgd2l0aG91dCBib29raW5nKVxuICAgIGJvb2tpbmc6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIHJlZjogJ0Jvb2tpbmcnLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgfSxcblxuICAgIC8vIFJldmlldyBjb250ZW50XG4gICAgdGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1JldmlldyB0aXRsZSBpcyByZXF1aXJlZCddLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgIG1heGxlbmd0aDogWzEwMCwgJ1RpdGxlIGNhbm5vdCBleGNlZWQgMTAwIGNoYXJhY3RlcnMnXVxuICAgIH0sXG5cbiAgICBjb250ZW50OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdSZXZpZXcgY29udGVudCBpcyByZXF1aXJlZCddLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgIG1heGxlbmd0aDogWzEwMDAsICdSZXZpZXcgY29udGVudCBjYW5ub3QgZXhjZWVkIDEwMDAgY2hhcmFjdGVycyddXG4gICAgfSxcblxuICAgIC8vIFJhdGluZyAoMS01IHN0YXJzKVxuICAgIHJhdGluZzoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUmF0aW5nIGlzIHJlcXVpcmVkJ10sXG4gICAgICBtaW46IFsxLCAnUmF0aW5nIG11c3QgYmUgYXQgbGVhc3QgMSddLFxuICAgICAgbWF4OiBbNSwgJ1JhdGluZyBjYW5ub3QgZXhjZWVkIDUnXVxuICAgIH0sXG5cbiAgICAvLyBBZGRpdGlvbmFsIHJhdGluZ3MgKG9wdGlvbmFsKVxuICAgIHJhdGluZ3M6IHtcbiAgICAgIGNsZWFubGluZXNzOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgbWluOiAxLFxuICAgICAgICBtYXg6IDUsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgbWluOiAxLFxuICAgICAgICBtYXg6IDUsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgbWluOiAxLFxuICAgICAgICBtYXg6IDUsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNlcnZpY2U6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBtaW46IDEsXG4gICAgICAgIG1heDogNSxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIFJldmlldyBzdGF0dXNcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IHtcbiAgICAgICAgdmFsdWVzOiBbJ3BlbmRpbmcnLCAnYXBwcm92ZWQnLCAncmVqZWN0ZWQnXSxcbiAgICAgICAgbWVzc2FnZTogJ1N0YXR1cyBtdXN0IGJlIHBlbmRpbmcsIGFwcHJvdmVkLCBvciByZWplY3RlZCdcbiAgICAgIH0sXG4gICAgICBkZWZhdWx0OiAnYXBwcm92ZWQnXG4gICAgfSxcblxuICAgIC8vIEhlbHBmdWwgdm90ZXNcbiAgICBoZWxwZnVsVm90ZXM6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDBcbiAgICB9LFxuXG4gICAgLy8gVXNlcnMgd2hvIGZvdW5kIHRoaXMgcmV2aWV3IGhlbHBmdWxcbiAgICBoZWxwZnVsVXNlcnM6IFt7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6ICdVc2VyJ1xuICAgIH1dLFxuXG4gICAgLy8gQWRtaW4gcmVzcG9uc2UgKG9wdGlvbmFsKVxuICAgIGFkbWluUmVzcG9uc2U6IHtcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBtYXhsZW5ndGg6IFs1MDAsICdBZG1pbiByZXNwb25zZSBjYW5ub3QgZXhjZWVkIDUwMCBjaGFyYWN0ZXJzJ11cbiAgICAgIH0sXG4gICAgICByZXNwb25kZWRCeToge1xuICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICAgIHJlZjogJ1VzZXInXG4gICAgICB9LFxuICAgICAgcmVzcG9uZGVkQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0ZVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgdG9KU09OOiB7IHZpcnR1YWxzOiB0cnVlIH0sXG4gICAgdG9PYmplY3Q6IHsgdmlydHVhbHM6IHRydWUgfVxuICB9XG4pO1xuXG4vLyBJbmRleCBmb3IgYmV0dGVyIHF1ZXJ5IHBlcmZvcm1hbmNlXG5yZXZpZXdTY2hlbWEuaW5kZXgoeyBkZXN0aW5hdGlvbjogMSwgY3JlYXRlZEF0OiAtMSB9KTtcbnJldmlld1NjaGVtYS5pbmRleCh7IHVzZXI6IDEsIGRlc3RpbmF0aW9uOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pOyAvLyBPbmUgcmV2aWV3IHBlciB1c2VyIHBlciBkZXN0aW5hdGlvblxucmV2aWV3U2NoZW1hLmluZGV4KHsgc3RhdHVzOiAxIH0pO1xucmV2aWV3U2NoZW1hLmluZGV4KHsgcmF0aW5nOiAxIH0pO1xuXG4vLyBWaXJ0dWFsIGZpZWxkIGZvciByZXZpZXcgYWdlXG5yZXZpZXdTY2hlbWEudmlydHVhbCgnYWdlJykuZ2V0KGZ1bmN0aW9uKCkge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBjcmVhdGVkID0gbmV3IERhdGUodGhpcy5jcmVhdGVkQXQpO1xuICBjb25zdCBkaWZmVGltZSA9IE1hdGguYWJzKG5vdyAtIGNyZWF0ZWQpO1xuICBjb25zdCBkaWZmRGF5cyA9IE1hdGguY2VpbChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG5cbiAgaWYgKGRpZmZEYXlzID09PSAxKSB7XG4gICAgcmV0dXJuICcxIGRheSBhZ28nO1xuICB9XG4gIGlmIChkaWZmRGF5cyA8IDcpIHtcbiAgICByZXR1cm4gYCR7ZGlmZkRheXN9IGRheXMgYWdvYDtcbiAgfVxuICBpZiAoZGlmZkRheXMgPCAzMCkge1xuICAgIHJldHVybiBgJHtNYXRoLmNlaWwoZGlmZkRheXMgLyA3KX0gd2Vla3MgYWdvYDtcbiAgfVxuICBpZiAoZGlmZkRheXMgPCAzNjUpIHtcbiAgICByZXR1cm4gYCR7TWF0aC5jZWlsKGRpZmZEYXlzIC8gMzApfSBtb250aHMgYWdvYDtcbiAgfVxuICByZXR1cm4gYCR7TWF0aC5jZWlsKGRpZmZEYXlzIC8gMzY1KX0geWVhcnMgYWdvYDtcbn0pO1xuXG4vLyBTdGF0aWMgbWV0aG9kIHRvIGNhbGN1bGF0ZSBhdmVyYWdlIHJhdGluZyBmb3IgYSBkZXN0aW5hdGlvblxucmV2aWV3U2NoZW1hLnN0YXRpY3MuY2FsY3VsYXRlQXZlcmFnZVJhdGluZyA9IGFzeW5jIGZ1bmN0aW9uKGRlc3RpbmF0aW9uSWQpIHtcbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmFnZ3JlZ2F0ZShbXG4gICAge1xuICAgICAgJG1hdGNoOiB7XG4gICAgICAgIGRlc3RpbmF0aW9uOiBkZXN0aW5hdGlvbklkLFxuICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICRncm91cDoge1xuICAgICAgICBfaWQ6ICckZGVzdGluYXRpb24nLFxuICAgICAgICBuUmF0aW5nOiB7ICRzdW06IDEgfSxcbiAgICAgICAgYXZnUmF0aW5nOiB7ICRhdmc6ICckcmF0aW5nJyB9LFxuICAgICAgICBhdmdDbGVhbmxpbmVzczogeyAkYXZnOiAnJHJhdGluZ3MuY2xlYW5saW5lc3MnIH0sXG4gICAgICAgIGF2Z0xvY2F0aW9uOiB7ICRhdmc6ICckcmF0aW5ncy5sb2NhdGlvbicgfSxcbiAgICAgICAgYXZnVmFsdWU6IHsgJGF2ZzogJyRyYXRpbmdzLnZhbHVlJyB9LFxuICAgICAgICBhdmdTZXJ2aWNlOiB7ICRhdmc6ICckcmF0aW5ncy5zZXJ2aWNlJyB9XG4gICAgICB9XG4gICAgfVxuICBdKTtcblxuICBpZiAoc3RhdHMubGVuZ3RoID4gMCkge1xuICAgIGF3YWl0IG1vbmdvb3NlLm1vZGVsKCdEZXN0aW5hdGlvbicpLmZpbmRCeUlkQW5kVXBkYXRlKGRlc3RpbmF0aW9uSWQsIHtcbiAgICAgIHJhdGluZzogTWF0aC5yb3VuZChzdGF0c1swXS5hdmdSYXRpbmcgKiAxMCkgLyAxMCxcbiAgICAgIHJhdGluZ0NvdW50OiBzdGF0c1swXS5uUmF0aW5nXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgbW9uZ29vc2UubW9kZWwoJ0Rlc3RpbmF0aW9uJykuZmluZEJ5SWRBbmRVcGRhdGUoZGVzdGluYXRpb25JZCwge1xuICAgICAgcmF0aW5nOiAwLFxuICAgICAgcmF0aW5nQ291bnQ6IDBcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gUG9zdC1zYXZlIG1pZGRsZXdhcmUgdG8gdXBkYXRlIGRlc3RpbmF0aW9uIHJhdGluZ1xucmV2aWV3U2NoZW1hLnBvc3QoJ3NhdmUnLCBmdW5jdGlvbigpIHtcbiAgdGhpcy5jb25zdHJ1Y3Rvci5jYWxjdWxhdGVBdmVyYWdlUmF0aW5nKHRoaXMuZGVzdGluYXRpb24pO1xufSk7XG5cbi8vIFBvc3QtcmVtb3ZlIG1pZGRsZXdhcmUgdG8gdXBkYXRlIGRlc3RpbmF0aW9uIHJhdGluZ1xucmV2aWV3U2NoZW1hLnBvc3QoJ3JlbW92ZScsIGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvbnN0cnVjdG9yLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRpbmcodGhpcy5kZXN0aW5hdGlvbik7XG59KTtcblxuY29uc3QgUmV2aWV3ID0gbW9uZ29vc2UubW9kZWwoJ1JldmlldycsIHJldmlld1NjaGVtYSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmV2aWV3OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLFlBQVksR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQU0sQ0FDdEM7RUFDRTtFQUNBQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsTUFBTTtJQUNYQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUsOEJBQThCO0VBQ2pELENBQUM7RUFFRDtFQUNBQyxXQUFXLEVBQUU7SUFDWEwsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsYUFBYTtJQUNsQkMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLGtDQUFrQztFQUNyRCxDQUFDO0VBRUQ7RUFDQUUsT0FBTyxFQUFFO0lBQ1BOLElB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