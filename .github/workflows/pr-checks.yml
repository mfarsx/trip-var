name: PR Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  pr-check:
    name: PR Quality Check
    runs-on: ubuntu-latest

    steps:
      - name: Check PR
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const changes = pr.additions + pr.deletions;

            console.log(`PR #${pr.number}: ${pr.title}`);
            console.log(`Changes: ${changes} lines`);
            console.log(`Files: ${pr.changed_files}`);

            // Warn if PR is very large
            if (changes > 1000) {
              core.warning('This PR is very large (>1000 lines). Consider breaking it into smaller PRs.');
            }

            // Check PR title format
            const conventionalCommitRegex = /^(feat|fix|docs|style|refactor|perf|test|build|ci|chore)(\(.+\))?: .+/;
            if (!conventionalCommitRegex.test(pr.title)) {
              core.warning('PR title should follow Conventional Commits format (e.g., "feat: add feature")');
            }

            core.info('âœ… PR check complete');
