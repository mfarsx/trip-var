eee35a35cc5b2dec6929c82b7d9744e2
const request = require('supertest');
const app = require('./app.test');
const {
  setupTestEnvironment,
  cleanupTestEnvironment,
  clearDatabase,
  createTestUser,
  generateTestToken,
  expectAuthError,
  expectValidationError
} = require('./setup');
describe('Middleware Tests', () => {
  beforeAll(async () => {
    await setupTestEnvironment();
  });
  afterAll(async () => {
    await cleanupTestEnvironment();
  });
  beforeEach(async () => {
    await clearDatabase();
  });
  describe('Authentication Middleware', () => {
    let user, token;
    beforeEach(async () => {
      user = await createTestUser();
      token = generateTestToken(user);
    });
    it('should allow access with valid token', async () => {
      const response = await request(app).get('/api/v1/auth/profile').set('Authorization', `Bearer ${token}`).expect(200);
      expect(response.body.status).toBe('success');
      expect(response.body.data.user.email).toBe(user.email);
    });
    it('should reject access without token', async () => {
      const response = await request(app).get('/api/v1/auth/profile').expect(401);
      expectAuthError(response, 401);
    });
    it('should reject access with invalid token', async () => {
      const response = await request(app).get('/api/v1/auth/profile').set('Authorization', 'Bearer invalid-token').expect(401);
      expectAuthError(response, 401);
    });
    it('should reject access with malformed authorization header', async () => {
      const response = await request(app).get('/api/v1/auth/profile').set('Authorization', 'InvalidFormat token').expect(401);
      expectAuthError(response, 401);
    });
    it('should reject access with expired token', async () => {
      // Create an expired token (this would require mocking JWT)
      const expiredToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OGI3YzA2NzdjOWVjNjE0MDFiOTZkMGQiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJpYXQiOjE2MzQ1Njc2MDAsImV4cCI6MTYzNDU3MTIwMH0.invalid';
      const response = await request(app).get('/api/v1/auth/profile').set('Authorization', `Bearer ${expiredToken}`).expect(401);
      expectAuthError(response, 401);
    });
  });
  describe('Admin Authorization Middleware', () => {
    let user, admin, userToken, adminToken;
    beforeEach(async () => {
      user = await createTestUser();
      admin = await createTestUser({
        email: 'admin@example.com',
        role: 'admin'
      });
      userToken = generateTestToken(user);
      adminToken = generateTestToken(admin);
    });
    it('should allow admin access to admin routes', async () => {
      const response = await request(app).get('/api/v1/bookings/admin/all').set('Authorization', `Bearer ${adminToken}`).expect(200);
      expect(response.body.status).toBe('success');
    });
    it('should reject regular user access to admin routes', async () => {
      const response = await request(app).get('/api/v1/bookings/admin/all').set('Authorization', `Bearer ${userToken}`).expect(403);
      expect(response.body.status).toBe('fail');
      expect(response.body.message).toContain('Access denied');
    });
    it('should reject access without authentication to admin routes', async () => {
      const response = await request(app).get('/api/v1/bookings/admin/all').expect(401);
      expectAuthError(response, 401);
    });
  });
  describe('Rate Limiting Middleware', () => {
    it('should apply rate limiting to API endpoints', async () => {
      const requests = Array(10).fill().map(() => request(app).get('/api/v1/destinations'));
      const responses = await Promise.allSettled(requests);

      // Some requests should be rate limited (status 429)
      const rateLimitedResponses = responses.filter(response => response.status === 'fulfilled' && response.value.status === 429);

      // Note: This test might not always trigger rate limiting depending on configuration
      // The important thing is that the middleware is applied
      expect(responses.length).toBe(10);
    });
    it('should allow requests within rate limit', async () => {
      const response = await request(app).get('/api/v1/destinations').expect(200);
      expect(response.body.status).toBe('success');
    });
  });
  describe('CORS Middleware', () => {
    it('should include CORS headers in response', async () => {
      const response = await request(app).get('/api/v1/destinations').expect(200);
      expect(response.headers).toHaveProperty('access-control-allow-origin');
      expect(response.headers).toHaveProperty('access-control-allow-credentials');
    });
    it('should handle preflight requests', async () => {
      const response = await request(app).options('/api/v1/destinations').set('Access-Control-Request-Method', 'POST').set('Access-Control-Request-Headers', 'Content-Type, Authorization').expect(204);
      expect(response.headers).toHaveProperty('access-control-allow-methods');
      expect(response.headers).toHaveProperty('access-control-allow-headers');
    });
  });
  describe('Security Middleware', () => {
    it('should include security headers', async () => {
      const response = await request(app).get('/api/v1/destinations').expect(200);

      // Check for common security headers
      expect(response.headers).toHaveProperty('x-content-type-options');
      expect(response.headers).toHaveProperty('x-frame-options');
      expect(response.headers).toHaveProperty('x-xss-protection');
    });
    it('should handle malformed JSON gracefully', async () => {
      const response = await request(app).post('/api/v1/auth/register').set('Content-Type', 'application/json').send('invalid json').expect(400);
      expect(response.body.status).toBe('fail');
    });
    it('should limit request body size', async () => {
      const largeData = 'x'.repeat(11 * 1024 * 1024); // 11MB

      const response = await request(app).post('/api/v1/auth/register').set('Content-Type', 'application/json').send({
        data: largeData
      }).expect(413); // Payload too large

      expect(response.body.status).toBe('fail');
    });
  });
  describe('Request Logging Middleware', () => {
    it('should add request ID to requests', async () => {
      const response = await request(app).get('/api/v1/destinations').expect(200);

      // Request ID should be added to response headers
      expect(response.headers).toHaveProperty('x-request-id');
    });
    it('should log request information', async () => {
      // This test would require capturing console output
      // For now, we'll just ensure the endpoint responds
      const response = await request(app).get('/api/v1/destinations').expect(200);
      expect(response.body.status).toBe('success');
    });
  });
  describe('Error Handling Middleware', () => {
    it('should handle 404 errors for undefined routes', async () => {
      const response = await request(app).get('/api/v1/nonexistent-route').expect(404);
      expect(response.body.status).toBe('fail');
      expect(response.body.message).toContain('not found');
    });
    it('should handle validation errors', async () => {
      const response = await request(app).post('/api/v1/auth/register').send({
        email: 'invalid-email',
        password: 'weak'
      }).expect(400);
      expect(response.body.status).toBe('fail');
      expect(response.body.message).toContain('validation');
    });
    it('should handle server errors gracefully', async () => {
      // This would require mocking a server error
      // For now, we'll test that the error handler is in place
      const response = await request(app).get('/api/v1/destinations').expect(200);
      expect(response.body.status).toBe('success');
    });
  });
  describe('Validation Middleware', () => {
    it('should validate required fields', async () => {
      const response = await request(app).post('/api/v1/auth/register').send({
        email: 'test@example.com'
        // Missing password and name
      }).expect(400);
      expectValidationError(response, 400, ['password', 'name']);
    });
    it('should validate email format', async () => {
      const response = await request(app).post('/api/v1/auth/register').send({
        email: 'invalid-email',
        password: 'ValidPassword123!',
        name: 'Test User'
      }).expect(400);
      expectValidationError(response, 400, ['email']);
    });
    it('should validate password strength', async () => {
      const response = await request(app).post('/api/v1/auth/register').send({
        email: 'test@example.com',
        password: 'weak',
        name: 'Test User'
      }).expect(400);
      expectValidationError(response, 400, ['password']);
    });
  });
  describe('Compression Middleware', () => {
    it('should compress response when Accept-Encoding includes gzip', async () => {
      const response = await request(app).get('/api/v1/destinations').set('Accept-Encoding', 'gzip, deflate').expect(200);

      // Response should be compressed
      expect(response.headers).toHaveProperty('content-encoding');
    });
  });
  describe('Session Middleware', () => {
    it('should handle session creation', async () => {
      const response = await request(app).get('/api/v1/destinations').expect(200);

      // Session middleware should be applied
      expect(response.body.status).toBe('success');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsInNldHVwVGVzdEVudmlyb25tZW50IiwiY2xlYW51cFRlc3RFbnZpcm9ubWVudCIsImNsZWFyRGF0YWJhc2UiLCJjcmVhdGVUZXN0VXNlciIsImdlbmVyYXRlVGVzdFRva2VuIiwiZXhwZWN0QXV0aEVycm9yIiwiZXhwZWN0VmFsaWRhdGlvbkVycm9yIiwiZGVzY3JpYmUiLCJiZWZvcmVBbGwiLCJhZnRlckFsbCIsImJlZm9yZUVhY2giLCJ1c2VyIiwidG9rZW4iLCJpdCIsInJlc3BvbnNlIiwiZ2V0Iiwic2V0IiwiZXhwZWN0IiwiYm9keSIsInN0YXR1cyIsInRvQmUiLCJkYXRhIiwiZW1haWwiLCJleHBpcmVkVG9rZW4iLCJhZG1pbiIsInVzZXJUb2tlbiIsImFkbWluVG9rZW4iLCJyb2xlIiwibWVzc2FnZSIsInRvQ29udGFpbiIsInJlcXVlc3RzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwicmVzcG9uc2VzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJyYXRlTGltaXRlZFJlc3BvbnNlcyIsImZpbHRlciIsInZhbHVlIiwibGVuZ3RoIiwiaGVhZGVycyIsInRvSGF2ZVByb3BlcnR5Iiwib3B0aW9ucyIsInBvc3QiLCJzZW5kIiwibGFyZ2VEYXRhIiwicmVwZWF0IiwicGFzc3dvcmQiLCJuYW1lIl0sInNvdXJjZXMiOlsibWlkZGxld2FyZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4vYXBwLnRlc3QnKTtcbmNvbnN0IHtcbiAgc2V0dXBUZXN0RW52aXJvbm1lbnQsXG4gIGNsZWFudXBUZXN0RW52aXJvbm1lbnQsXG4gIGNsZWFyRGF0YWJhc2UsXG4gIGNyZWF0ZVRlc3RVc2VyLFxuICBnZW5lcmF0ZVRlc3RUb2tlbixcbiAgZXhwZWN0QXV0aEVycm9yLFxuICBleHBlY3RWYWxpZGF0aW9uRXJyb3Jcbn0gPSByZXF1aXJlKCcuL3NldHVwJyk7XG5cbmRlc2NyaWJlKCdNaWRkbGV3YXJlIFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHNldHVwVGVzdEVudmlyb25tZW50KCk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBjbGVhbnVwVGVzdEVudmlyb25tZW50KCk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNsZWFyRGF0YWJhc2UoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgbGV0IHVzZXIsIHRva2VuO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICB1c2VyID0gYXdhaXQgY3JlYXRlVGVzdFVzZXIoKTtcbiAgICAgIHRva2VuID0gZ2VuZXJhdGVUZXN0VG9rZW4odXNlcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGFjY2VzcyB3aXRoIHZhbGlkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9hdXRoL3Byb2ZpbGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnVzZXIuZW1haWwpLnRvQmUodXNlci5lbWFpbCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBhY2Nlc3Mgd2l0aG91dCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvYXV0aC9wcm9maWxlJylcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3RBdXRoRXJyb3IocmVzcG9uc2UsIDQwMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBhY2Nlc3Mgd2l0aCBpbnZhbGlkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9hdXRoL3Byb2ZpbGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciBpbnZhbGlkLXRva2VuJylcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3RBdXRoRXJyb3IocmVzcG9uc2UsIDQwMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBhY2Nlc3Mgd2l0aCBtYWxmb3JtZWQgYXV0aG9yaXphdGlvbiBoZWFkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2F1dGgvcHJvZmlsZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCAnSW52YWxpZEZvcm1hdCB0b2tlbicpXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0QXV0aEVycm9yKHJlc3BvbnNlLCA0MDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgYWNjZXNzIHdpdGggZXhwaXJlZCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbiBleHBpcmVkIHRva2VuICh0aGlzIHdvdWxkIHJlcXVpcmUgbW9ja2luZyBKV1QpXG4gICAgICBjb25zdCBleHBpcmVkVG9rZW4gPSAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SjFjMlZ5U1dRaU9pSTJPR0kzWXpBMk56ZGpPV1ZqTmpFME1ERmlPVFprTUdRaUxDSmxiV0ZwYkNJNkluUmxjM1JBWlhoaGJYQnNaUzVqYjIwaUxDSnBZWFFpT2pFMk16UTFOamMyTURBc0ltVjRjQ0k2TVRZek5EVTNNVEl3TUgwLmludmFsaWQnO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2F1dGgvcHJvZmlsZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7ZXhwaXJlZFRva2VufWApXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0QXV0aEVycm9yKHJlc3BvbnNlLCA0MDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWRtaW4gQXV0aG9yaXphdGlvbiBNaWRkbGV3YXJlJywgKCkgPT4ge1xuICAgIGxldCB1c2VyLCBhZG1pbiwgdXNlclRva2VuLCBhZG1pblRva2VuO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICB1c2VyID0gYXdhaXQgY3JlYXRlVGVzdFVzZXIoKTtcbiAgICAgIGFkbWluID0gYXdhaXQgY3JlYXRlVGVzdFVzZXIoeyBcbiAgICAgICAgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsIFxuICAgICAgICByb2xlOiAnYWRtaW4nIFxuICAgICAgfSk7XG4gICAgICB1c2VyVG9rZW4gPSBnZW5lcmF0ZVRlc3RUb2tlbih1c2VyKTtcbiAgICAgIGFkbWluVG9rZW4gPSBnZW5lcmF0ZVRlc3RUb2tlbihhZG1pbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGFkbWluIGFjY2VzcyB0byBhZG1pbiByb3V0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2Jvb2tpbmdzL2FkbWluL2FsbCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN0YXR1cykudG9CZSgnc3VjY2VzcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcmVndWxhciB1c2VyIGFjY2VzcyB0byBhZG1pbiByb3V0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2Jvb2tpbmdzL2FkbWluL2FsbCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dXNlclRva2VufWApXG4gICAgICAgIC5leHBlY3QoNDAzKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdmYWlsJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ0FjY2VzcyBkZW5pZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGFjY2VzcyB3aXRob3V0IGF1dGhlbnRpY2F0aW9uIHRvIGFkbWluIHJvdXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvYm9va2luZ3MvYWRtaW4vYWxsJylcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3RBdXRoRXJyb3IocmVzcG9uc2UsIDQwMSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSYXRlIExpbWl0aW5nIE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhcHBseSByYXRlIGxpbWl0aW5nIHRvIEFQSSBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+XG4gICAgICAgIHJlcXVlc3QoYXBwKS5nZXQoJy9hcGkvdjEvZGVzdGluYXRpb25zJylcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChyZXF1ZXN0cyk7XG4gICAgICBcbiAgICAgIC8vIFNvbWUgcmVxdWVzdHMgc2hvdWxkIGJlIHJhdGUgbGltaXRlZCAoc3RhdHVzIDQyOSlcbiAgICAgIGNvbnN0IHJhdGVMaW1pdGVkUmVzcG9uc2VzID0gcmVzcG9uc2VzLmZpbHRlcihcbiAgICAgICAgcmVzcG9uc2UgPT4gcmVzcG9uc2Uuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiByZXNwb25zZS52YWx1ZS5zdGF0dXMgPT09IDQyOVxuICAgICAgKTtcblxuICAgICAgLy8gTm90ZTogVGhpcyB0ZXN0IG1pZ2h0IG5vdCBhbHdheXMgdHJpZ2dlciByYXRlIGxpbWl0aW5nIGRlcGVuZGluZyBvbiBjb25maWd1cmF0aW9uXG4gICAgICAvLyBUaGUgaW1wb3J0YW50IHRoaW5nIGlzIHRoYXQgdGhlIG1pZGRsZXdhcmUgaXMgYXBwbGllZFxuICAgICAgZXhwZWN0KHJlc3BvbnNlcy5sZW5ndGgpLnRvQmUoMTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyByZXF1ZXN0cyB3aXRoaW4gcmF0ZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvZGVzdGluYXRpb25zJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdGF0dXMpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NPUlMgTWlkZGxld2FyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgQ09SUyBoZWFkZXJzIGluIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9kZXN0aW5hdGlvbnMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b0hhdmVQcm9wZXJ0eSgnYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ2FjY2Vzcy1jb250cm9sLWFsbG93LWNyZWRlbnRpYWxzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwcmVmbGlnaHQgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAub3B0aW9ucygnL2FwaS92MS9kZXN0aW5hdGlvbnMnKVxuICAgICAgICAuc2V0KCdBY2Nlc3MtQ29udHJvbC1SZXF1ZXN0LU1ldGhvZCcsICdQT1NUJylcbiAgICAgICAgLnNldCgnQWNjZXNzLUNvbnRyb2wtUmVxdWVzdC1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicpXG4gICAgICAgIC5leHBlY3QoMjA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnMpLnRvSGF2ZVByb3BlcnR5KCdhY2Nlc3MtY29udHJvbC1hbGxvdy1tZXRob2RzJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ2FjY2Vzcy1jb250cm9sLWFsbG93LWhlYWRlcnMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHNlY3VyaXR5IGhlYWRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2Rlc3RpbmF0aW9ucycpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIGNvbW1vbiBzZWN1cml0eSBoZWFkZXJzXG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ3gtY29udGVudC10eXBlLW9wdGlvbnMnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b0hhdmVQcm9wZXJ0eSgneC1mcmFtZS1vcHRpb25zJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ3gteHNzLXByb3RlY3Rpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBKU09OIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS92MS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNldCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKVxuICAgICAgICAuc2VuZCgnaW52YWxpZCBqc29uJylcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdGF0dXMpLnRvQmUoJ2ZhaWwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbGltaXQgcmVxdWVzdCBib2R5IHNpemUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZURhdGEgPSAneCcucmVwZWF0KDExICogMTAyNCAqIDEwMjQpOyAvLyAxMU1CXG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3YxL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpXG4gICAgICAgIC5zZW5kKHsgZGF0YTogbGFyZ2VEYXRhIH0pXG4gICAgICAgIC5leHBlY3QoNDEzKTsgLy8gUGF5bG9hZCB0b28gbGFyZ2VcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdmYWlsJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXF1ZXN0IExvZ2dpbmcgTWlkZGxld2FyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFkZCByZXF1ZXN0IElEIHRvIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9kZXN0aW5hdGlvbnMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIC8vIFJlcXVlc3QgSUQgc2hvdWxkIGJlIGFkZGVkIHRvIHJlc3BvbnNlIGhlYWRlcnNcbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b0hhdmVQcm9wZXJ0eSgneC1yZXF1ZXN0LWlkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyByZXF1ZXN0IGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGhpcyB0ZXN0IHdvdWxkIHJlcXVpcmUgY2FwdHVyaW5nIGNvbnNvbGUgb3V0cHV0XG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IGVuc3VyZSB0aGUgZW5kcG9pbnQgcmVzcG9uZHNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvZGVzdGluYXRpb25zJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdGF0dXMpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nIE1pZGRsZXdhcmUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgNDA0IGVycm9ycyBmb3IgdW5kZWZpbmVkIHJvdXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvbm9uZXhpc3RlbnQtcm91dGUnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN0YXR1cykudG9CZSgnZmFpbCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9Db250YWluKCdub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvdjEvYXV0aC9yZWdpc3RlcicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgICAgIHBhc3N3b3JkOiAnd2VhaydcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdGF0dXMpLnRvQmUoJ2ZhaWwnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbigndmFsaWRhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmVyIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGhpcyB3b3VsZCByZXF1aXJlIG1vY2tpbmcgYSBzZXJ2ZXIgZXJyb3JcbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIHRlc3QgdGhhdCB0aGUgZXJyb3IgaGFuZGxlciBpcyBpbiBwbGFjZVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9kZXN0aW5hdGlvbnMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN0YXR1cykudG9CZSgnc3VjY2VzcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVmFsaWRhdGlvbiBNaWRkbGV3YXJlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvdjEvYXV0aC9yZWdpc3RlcicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nXG4gICAgICAgICAgLy8gTWlzc2luZyBwYXNzd29yZCBhbmQgbmFtZVxuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdFZhbGlkYXRpb25FcnJvcihyZXNwb25zZSwgNDAwLCBbJ3Bhc3N3b3JkJywgJ25hbWUnXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGVtYWlsIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3YxL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICdpbnZhbGlkLWVtYWlsJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1ZhbGlkUGFzc3dvcmQxMjMhJyxcbiAgICAgICAgICBuYW1lOiAnVGVzdCBVc2VyJ1xuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdFZhbGlkYXRpb25FcnJvcihyZXNwb25zZSwgNDAwLCBbJ2VtYWlsJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBwYXNzd29yZCBzdHJlbmd0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3YxL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3dlYWsnLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFVzZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0VmFsaWRhdGlvbkVycm9yKHJlc3BvbnNlLCA0MDAsIFsncGFzc3dvcmQnXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wcmVzc2lvbiBNaWRkbGV3YXJlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcHJlc3MgcmVzcG9uc2Ugd2hlbiBBY2NlcHQtRW5jb2RpbmcgaW5jbHVkZXMgZ3ppcCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvZGVzdGluYXRpb25zJylcbiAgICAgICAgLnNldCgnQWNjZXB0LUVuY29kaW5nJywgJ2d6aXAsIGRlZmxhdGUnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIC8vIFJlc3BvbnNlIHNob3VsZCBiZSBjb21wcmVzc2VkXG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ2NvbnRlbnQtZW5jb2RpbmcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Nlc3Npb24gTWlkZGxld2FyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXNzaW9uIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS92MS9kZXN0aW5hdGlvbnMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIC8vIFNlc3Npb24gbWlkZGxld2FyZSBzaG91bGQgYmUgYXBwbGllZFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdzdWNjZXNzJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ2pDLE1BQU07RUFDSkUsb0JBQW9CO0VBQ3BCQyxzQkFBc0I7RUFDdEJDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxpQkFBaUI7RUFDakJDLGVBQWU7RUFDZkM7QUFDRixDQUFDLEdBQUdSLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFFdEJTLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNO0VBQ2pDQyxTQUFTLENBQUMsWUFBWTtJQUNwQixNQUFNUixvQkFBb0IsQ0FBQyxDQUFDO0VBQzlCLENBQUMsQ0FBQztFQUVGUyxRQUFRLENBQUMsWUFBWTtJQUNuQixNQUFNUixzQkFBc0IsQ0FBQyxDQUFDO0VBQ2hDLENBQUMsQ0FBQztFQUVGUyxVQUFVLENBQUMsWUFBWTtJQUNyQixNQUFNUixhQUFhLENBQUMsQ0FBQztFQUN2QixDQUFDLENBQUM7RUFFRkssUUFBUSxDQUFDLDJCQUEyQixFQUFFLE1BQU07SUFDMUMsSUFBSUksSUFBSSxFQUFFQyxLQUFLO0lBRWZGLFVBQVUsQ0FBQyxZQUFZO01BQ3JCQyxJQUFJLEdBQUcsTUFBTVIsY0FBYyxDQUFDLENBQUM7TUFDN0JTLEtBQUssR0FBR1IsaUJBQWlCLENBQUNPLElBQUksQ0FBQztJQUNqQyxDQUFDLENBQUM7SUFFRkUsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLFlBQVk7TUFDckQsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUMzQkMsR0FBRyxDQUFDLGVBQWUsRUFBRSxVQUFVSixLQUFLLEVBQUUsQ0FBQyxDQUN2Q0ssTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkQSxNQUFNLENBQUNILFFBQVEsQ0FBQ0ksSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLFNBQVMsQ0FBQztNQUM1Q0gsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ0csSUFBSSxDQUFDVixJQUFJLENBQUNXLEtBQUssQ0FBQyxDQUFDRixJQUFJLENBQUNULElBQUksQ0FBQ1csS0FBSyxDQUFDO0lBQ3hELENBQUMsQ0FBQztJQUVGVCxFQUFFLENBQUMsb0NBQW9DLEVBQUUsWUFBWTtNQUNuRCxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDZ0IsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQzNCRSxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRaLGVBQWUsQ0FBQ1MsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNoQyxDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLFlBQVk7TUFDeEQsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUMzQkMsR0FBRyxDQUFDLGVBQWUsRUFBRSxzQkFBc0IsQ0FBQyxDQUM1Q0MsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkWixlQUFlLENBQUNTLFFBQVEsRUFBRSxHQUFHLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQywwREFBMEQsRUFBRSxZQUFZO01BQ3pFLE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FDM0JDLEdBQUcsQ0FBQyxlQUFlLEVBQUUscUJBQXFCLENBQUMsQ0FDM0NDLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZFosZUFBZSxDQUFDUyxRQUFRLEVBQUUsR0FBRyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztJQUVGRCxFQUFFLENBQUMseUNBQXlDLEVBQUUsWUFBWTtNQUN4RDtNQUNBLE1BQU1VLFlBQVksR0FBRyxrTEFBa0w7TUFFdk0sTUFBTVQsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUMzQkMsR0FBRyxDQUFDLGVBQWUsRUFBRSxVQUFVTyxZQUFZLEVBQUUsQ0FBQyxDQUM5Q04sTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkWixlQUFlLENBQUNTLFFBQVEsRUFBRSxHQUFHLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZQLFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNO0lBQy9DLElBQUlJLElBQUksRUFBRWEsS0FBSyxFQUFFQyxTQUFTLEVBQUVDLFVBQVU7SUFFdENoQixVQUFVLENBQUMsWUFBWTtNQUNyQkMsSUFBSSxHQUFHLE1BQU1SLGNBQWMsQ0FBQyxDQUFDO01BQzdCcUIsS0FBSyxHQUFHLE1BQU1yQixjQUFjLENBQUM7UUFDM0JtQixLQUFLLEVBQUUsbUJBQW1CO1FBQzFCSyxJQUFJLEVBQUU7TUFDUixDQUFDLENBQUM7TUFDRkYsU0FBUyxHQUFHckIsaUJBQWlCLENBQUNPLElBQUksQ0FBQztNQUNuQ2UsVUFBVSxHQUFHdEIsaUJBQWlCLENBQUNvQixLQUFLLENBQUM7SUFDdkMsQ0FBQyxDQUFDO0lBRUZYLEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxZQUFZO01BQzFELE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsNEJBQTRCLENBQUMsQ0FDakNDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsVUFBVVUsVUFBVSxFQUFFLENBQUMsQ0FDNUNULE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDOUMsQ0FBQyxDQUFDO0lBRUZQLEVBQUUsQ0FBQyxtREFBbUQsRUFBRSxZQUFZO01BQ2xFLE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsNEJBQTRCLENBQUMsQ0FDakNDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsVUFBVVMsU0FBUyxFQUFFLENBQUMsQ0FDM0NSLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLElBQUksQ0FBQyxNQUFNLENBQUM7TUFDekNILE1BQU0sQ0FBQ0gsUUFBUSxDQUFDSSxJQUFJLENBQUNVLE9BQU8sQ0FBQyxDQUFDQyxTQUFTLENBQUMsZUFBZSxDQUFDO0lBQzFELENBQUMsQ0FBQztJQUVGaEIsRUFBRSxDQUFDLDZEQUE2RCxFQUFFLFlBQVk7TUFDNUUsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUNqQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkWixlQUFlLENBQUNTLFFBQVEsRUFBRSxHQUFHLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZQLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0lBQ3pDTSxFQUFFLENBQUMsNkNBQTZDLEVBQUUsWUFBWTtNQUM1RCxNQUFNaUIsUUFBUSxHQUFHQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxNQUNwQ3BDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQUNnQixHQUFHLENBQUMsc0JBQXNCLENBQ3pDLENBQUM7TUFFRCxNQUFNbUIsU0FBUyxHQUFHLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDTixRQUFRLENBQUM7O01BRXBEO01BQ0EsTUFBTU8sb0JBQW9CLEdBQUdILFNBQVMsQ0FBQ0ksTUFBTSxDQUMzQ3hCLFFBQVEsSUFBSUEsUUFBUSxDQUFDSyxNQUFNLEtBQUssV0FBVyxJQUFJTCxRQUFRLENBQUN5QixLQUFLLENBQUNwQixNQUFNLEtBQUssR0FDM0UsQ0FBQzs7TUFFRDtNQUNBO01BQ0FGLE1BQU0sQ0FBQ2lCLFNBQVMsQ0FBQ00sTUFBTSxDQUFDLENBQUNwQixJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ25DLENBQUMsQ0FBQztJQUVGUCxFQUFFLENBQUMseUNBQXlDLEVBQUUsWUFBWTtNQUN4RCxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDZ0IsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQzNCRSxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDSSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzlDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGYixRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtJQUNoQ00sRUFBRSxDQUFDLHlDQUF5QyxFQUFFLFlBQVk7TUFDeEQsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUMzQkUsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkQSxNQUFNLENBQUNILFFBQVEsQ0FBQzJCLE9BQU8sQ0FBQyxDQUFDQyxjQUFjLENBQUMsNkJBQTZCLENBQUM7TUFDdEV6QixNQUFNLENBQUNILFFBQVEsQ0FBQzJCLE9BQU8sQ0FBQyxDQUFDQyxjQUFjLENBQUMsa0NBQWtDLENBQUM7SUFDN0UsQ0FBQyxDQUFDO0lBRUY3QixFQUFFLENBQUMsa0NBQWtDLEVBQUUsWUFBWTtNQUNqRCxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDNEMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQy9CM0IsR0FBRyxDQUFDLCtCQUErQixFQUFFLE1BQU0sQ0FBQyxDQUM1Q0EsR0FBRyxDQUFDLGdDQUFnQyxFQUFFLDZCQUE2QixDQUFDLENBQ3BFQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDMkIsT0FBTyxDQUFDLENBQUNDLGNBQWMsQ0FBQyw4QkFBOEIsQ0FBQztNQUN2RXpCLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDMkIsT0FBTyxDQUFDLENBQUNDLGNBQWMsQ0FBQyw4QkFBOEIsQ0FBQztJQUN6RSxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRm5DLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0lBQ3BDTSxFQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBWTtNQUNoRCxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDZ0IsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQzNCRSxNQUFNLENBQUMsR0FBRyxDQUFDOztNQUVkO01BQ0FBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDMkIsT0FBTyxDQUFDLENBQUNDLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQztNQUNqRXpCLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDMkIsT0FBTyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQztNQUMxRHpCLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDMkIsT0FBTyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQztJQUM3RCxDQUFDLENBQUM7SUFFRjdCLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxZQUFZO01BQ3hELE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaEM2QyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FDN0I1QixHQUFHLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDLENBQ3ZDNkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUNwQjVCLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDM0MsQ0FBQyxDQUFDO0lBRUZQLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFZO01BQy9DLE1BQU1pQyxTQUFTLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDOztNQUVoRCxNQUFNakMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQzZDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUM3QjVCLEdBQUcsQ0FBQyxjQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FDdkM2QixJQUFJLENBQUM7UUFBRXhCLElBQUksRUFBRXlCO01BQVUsQ0FBQyxDQUFDLENBQ3pCN0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7O01BRWhCQSxNQUFNLENBQUNILFFBQVEsQ0FBQ0ksSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUMzQyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRmIsUUFBUSxDQUFDLDRCQUE0QixFQUFFLE1BQU07SUFDM0NNLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxZQUFZO01BQ2xELE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FDM0JFLE1BQU0sQ0FBQyxHQUFHLENBQUM7O01BRWQ7TUFDQUEsTUFBTSxDQUFDSCxRQUFRLENBQUMyQixPQUFPLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLGNBQWMsQ0FBQztJQUN6RCxDQUFDLENBQUM7SUFFRjdCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFZO01BQy9DO01BQ0E7TUFDQSxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDZ0IsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQzNCRSxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDSSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzlDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGYixRQUFRLENBQUMsMkJBQTJCLEVBQUUsTUFBTTtJQUMxQ00sRUFBRSxDQUFDLCtDQUErQyxFQUFFLFlBQVk7TUFDOUQsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ2dCLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUNoQ0UsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkQSxNQUFNLENBQUNILFFBQVEsQ0FBQ0ksSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLE1BQU0sQ0FBQztNQUN6Q0gsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ1UsT0FBTyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxXQUFXLENBQUM7SUFDdEQsQ0FBQyxDQUFDO0lBRUZoQixFQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBWTtNQUNoRCxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDNkMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQzdCQyxJQUFJLENBQUM7UUFDSnZCLEtBQUssRUFBRSxlQUFlO1FBQ3RCMEIsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDLENBQ0QvQixNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDSSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJLENBQUMsTUFBTSxDQUFDO01BQ3pDSCxNQUFNLENBQUNILFFBQVEsQ0FBQ0ksSUFBSSxDQUFDVSxPQUFPLENBQUMsQ0FBQ0MsU0FBUyxDQUFDLFlBQVksQ0FBQztJQUN2RCxDQUFDLENBQUM7SUFFRmhCLEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxZQUFZO01BQ3ZEO01BQ0E7TUFDQSxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDZ0IsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQzNCRSxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0gsUUFBUSxDQUFDSSxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzlDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGYixRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtJQUN0Q00sRUFBRSxDQUFDLGlDQUFpQyxFQUFFLFlBQVk7TUFDaEQsTUFBTUMsUUFBUSxHQUFHLE1BQU1qQixPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQzZDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUM3QkMsSUFBSSxDQUFDO1FBQ0p2QixLQUFLLEVBQUU7UUFDUDtNQUNGLENBQUMsQ0FBQyxDQUNETCxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRYLHFCQUFxQixDQUFDUSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzVELENBQUMsQ0FBQztJQUVGRCxFQUFFLENBQUMsOEJBQThCLEVBQUUsWUFBWTtNQUM3QyxNQUFNQyxRQUFRLEdBQUcsTUFBTWpCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDNkMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQzdCQyxJQUFJLENBQUM7UUFDSnZCLEtBQUssRUFBRSxlQUFlO1FBQ3RCMEIsUUFBUSxFQUFFLG1CQUFtQjtRQUM3QkMsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDLENBQ0RoQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRYLHFCQUFxQixDQUFDUSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxZQUFZO01BQ2xELE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaEM2QyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FDN0JDLElBQUksQ0FBQztRQUNKdkIsS0FBSyxFQUFFLGtCQUFrQjtRQUN6QjBCLFFBQVEsRUFBRSxNQUFNO1FBQ2hCQyxJQUFJLEVBQUU7TUFDUixDQUFDLENBQUMsQ0FDRGhDLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZFgscUJBQXFCLENBQUNRLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNwRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRlAsUUFBUSxDQUFDLHdCQUF3QixFQUFFLE1BQU07SUFDdkNNLEVBQUUsQ0FBQyw2REFBNkQsRUFBRSxZQUFZO01BQzVFLE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FDM0JDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxlQUFlLENBQUMsQ0FDdkNDLE1BQU0sQ0FBQyxHQUFHLENBQUM7O01BRWQ7TUFDQUEsTUFBTSxDQUFDSCxRQUFRLENBQUMyQixPQUFPLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLGtCQUFrQixDQUFDO0lBQzdELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGbkMsUUFBUSxDQUFDLG9CQUFvQixFQUFFLE1BQU07SUFDbkNNLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFZO01BQy9DLE1BQU1DLFFBQVEsR0FBRyxNQUFNakIsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FDaENnQixHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FDM0JFLE1BQU0sQ0FBQyxHQUFHLENBQUM7O01BRWQ7TUFDQUEsTUFBTSxDQUFDSCxRQUFRLENBQUNJLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDOUMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119