22a144d97613c8b3f57bebfe99286af1
const {
  AppError,
  createError
} = require('../utils/errors');
const {
  error,
  warn,
  security
} = require('../utils/logger');
const config = require('../config/config');
const handleCastErrorDB = err => {
  const message = `Invalid ${err.path}: ${err.value}`;
  return createError.validation(message, {
    field: err.path,
    value: err.value
  });
};
const handleValidationErrorDB = err => {
  const errors = Object.values(err.errors).map(el => ({
    field: el.path,
    message: el.message,
    value: el.value
  }));
  const message = `Invalid input data. ${errors.map(e => e.message).join('. ')}`;
  return createError.validation(message, errors);
};
const handleJWTError = () => createError.authentication('Invalid token. Please log in again!');
const handleJWTExpiredError = () => createError.authentication('Your token has expired! Please log in again.');
const handleDuplicateFieldsDB = err => {
  const field = Object.keys(err.keyValue)[0];
  const value = err.keyValue[field];
  const message = `${field.charAt(0).toUpperCase() + field.slice(1)} '${value}' already exists`;
  return createError.conflict(message, {
    field,
    value
  });
};
const handleMongoError = err => {
  if (err.code === 11000) {
    return handleDuplicateFieldsDB(err);
  }
  return createError.database('Database operation failed', {
    code: err.code
  });
};
const handleRedisError = err => {
  return createError.serviceUnavailable('Cache service unavailable', {
    service: 'redis',
    error: err.message
  });
};
const handleRateLimitError = err => {
  return createError.tooManyRequests('Too many requests, please try again later', {
    retryAfter: err.retryAfter,
    limit: err.limit,
    remaining: err.remaining
  });
};
const handleMulterError = err => {
  if (err.code === 'LIMIT_FILE_SIZE') {
    return createError.validation('File too large', {
      maxSize: err.limit,
      receivedSize: err.size
    });
  }
  if (err.code === 'LIMIT_FILE_COUNT') {
    return createError.validation('Too many files', {
      maxFiles: err.limit,
      receivedFiles: err.files?.length
    });
  }
  if (err.code === 'LIMIT_UNEXPECTED_FILE') {
    return createError.validation('Unexpected file field', {
      field: err.field
    });
  }
  return createError.validation('File upload error', {
    error: err.message
  });
};
const sendErrorDev = (err, res, req) => {
  res.status(err.statusCode).json({
    status: err.status,
    message: err.message,
    code: err.code,
    details: err.details,
    error: {
      name: err.name,
      stack: err.stack
    },
    requestId: req.requestId,
    timestamp: err.timestamp,
    path: req.path,
    method: req.method
  });
};
const sendErrorProd = (err, res, req) => {
  // Operational, trusted error: send message to client
  if (err.isOperational) {
    res.status(err.statusCode).json({
      status: err.status,
      message: err.message,
      code: err.code,
      details: err.details,
      requestId: req.requestId,
      timestamp: err.timestamp
    });
  }
  // Programming or other unknown error: don't leak error details
  else {
    // Log error for debugging
    error('Unhandled error', {
      error: err.message,
      stack: err.stack,
      requestId: req.requestId,
      url: req.url,
      method: req.method,
      userAgent: req.get('User-Agent'),
      ip: req.ip,
      body: req.body,
      query: req.query,
      params: req.params
    });

    // Send generic message
    res.status(500).json({
      status: 'error',
      message: 'Something went very wrong!',
      code: 'INTERNAL_SERVER_ERROR',
      requestId: req.requestId,
      timestamp: new Date().toISOString()
    });
  }
};

// Global error handling middleware
module.exports = (err, req, res, next) => {
  err.statusCode = err.statusCode || 500;
  err.status = err.status || 'error';
  err.timestamp = err.timestamp || new Date().toISOString();
  err.requestId = req.requestId || req.id || 'unknown';

  // Handle JSON parsing errors
  if (err instanceof SyntaxError && err.status === 400 && 'body' in err) {
    err = createError.validation('Invalid JSON format', {
      originalError: err.message,
      code: 'INVALID_JSON'
    });
  }

  // Handle payload too large errors
  if (err.type === 'entity.too.large') {
    err = createError.validation('Request payload too large', {
      code: 'PAYLOAD_TOO_LARGE',
      limit: err.limit
    });
  }

  // Log all errors with appropriate level
  if (err.statusCode >= 500) {
    error('Server error', {
      error: err.message,
      stack: config.server.isDevelopment ? err.stack : undefined,
      requestId: req.requestId,
      url: req.url,
      method: req.method,
      statusCode: err.statusCode,
      userAgent: req.get('User-Agent'),
      ip: req.ip
    });

    // Alert for critical server errors
    warn('CRITICAL SERVER ERROR', {
      error: err.message,
      requestId: req.requestId,
      url: req.url,
      method: req.method,
      statusCode: err.statusCode,
      ip: req.ip,
      timestamp: new Date().toISOString()
    });
  } else if (err.statusCode >= 400) {
    warn('Client error', {
      error: err.message,
      requestId: req.requestId,
      url: req.url,
      method: req.method,
      statusCode: err.statusCode,
      userAgent: req.get('User-Agent'),
      ip: req.ip
    });
  }

  // Log security-related errors
  if (err.statusCode === 401 || err.statusCode === 403) {
    warn('Authentication/Authorization error', {
      error: err.message,
      requestId: req.requestId,
      url: req.url,
      method: req.method,
      ip: req.ip,
      userAgent: req.get('User-Agent')
    });
  }
  if (config.server.isDevelopment) {
    sendErrorDev(err, res, req);
  } else {
    let error = {
      ...err
    };
    error.message = err.message;

    // Handle specific error types
    if (error.name === 'CastError') {
      error = handleCastErrorDB(error);
    }
    if (error.name === 'ValidationError') {
      error = handleValidationErrorDB(error);
    }
    if (error.name === 'JsonWebTokenError') {
      error = handleJWTError();
    }
    if (error.name === 'TokenExpiredError') {
      error = handleJWTExpiredError();
    }
    if (error.name === 'MongoError') {
      error = handleMongoError(error);
    }
    if (error.name === 'MongoServerError') {
      error = handleMongoError(error);
    }
    if (error.name === 'RedisError') {
      error = handleRedisError(error);
    }
    if (error.name === 'RateLimitError') {
      error = handleRateLimitError(error);
    }
    if (error.name === 'MulterError') {
      error = handleMulterError(error);
    }
    sendErrorProd(error, res, req);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcHBFcnJvciIsImNyZWF0ZUVycm9yIiwicmVxdWlyZSIsImVycm9yIiwid2FybiIsInNlY3VyaXR5IiwiY29uZmlnIiwiaGFuZGxlQ2FzdEVycm9yREIiLCJlcnIiLCJtZXNzYWdlIiwicGF0aCIsInZhbHVlIiwidmFsaWRhdGlvbiIsImZpZWxkIiwiaGFuZGxlVmFsaWRhdGlvbkVycm9yREIiLCJlcnJvcnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlbCIsImUiLCJqb2luIiwiaGFuZGxlSldURXJyb3IiLCJhdXRoZW50aWNhdGlvbiIsImhhbmRsZUpXVEV4cGlyZWRFcnJvciIsImhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCIiwia2V5cyIsImtleVZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImNvbmZsaWN0IiwiaGFuZGxlTW9uZ29FcnJvciIsImNvZGUiLCJkYXRhYmFzZSIsImhhbmRsZVJlZGlzRXJyb3IiLCJzZXJ2aWNlVW5hdmFpbGFibGUiLCJzZXJ2aWNlIiwiaGFuZGxlUmF0ZUxpbWl0RXJyb3IiLCJ0b29NYW55UmVxdWVzdHMiLCJyZXRyeUFmdGVyIiwibGltaXQiLCJyZW1haW5pbmciLCJoYW5kbGVNdWx0ZXJFcnJvciIsIm1heFNpemUiLCJyZWNlaXZlZFNpemUiLCJzaXplIiwibWF4RmlsZXMiLCJyZWNlaXZlZEZpbGVzIiwiZmlsZXMiLCJsZW5ndGgiLCJzZW5kRXJyb3JEZXYiLCJyZXMiLCJyZXEiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwianNvbiIsImRldGFpbHMiLCJuYW1lIiwic3RhY2siLCJyZXF1ZXN0SWQiLCJ0aW1lc3RhbXAiLCJtZXRob2QiLCJzZW5kRXJyb3JQcm9kIiwiaXNPcGVyYXRpb25hbCIsInVybCIsInVzZXJBZ2VudCIsImdldCIsImlwIiwiYm9keSIsInF1ZXJ5IiwicGFyYW1zIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5leHQiLCJpZCIsIlN5bnRheEVycm9yIiwib3JpZ2luYWxFcnJvciIsInR5cGUiLCJzZXJ2ZXIiLCJpc0RldmVsb3BtZW50IiwidW5kZWZpbmVkIl0sInNvdXJjZXMiOlsiZXJyb3JIYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgQXBwRXJyb3IsIGNyZWF0ZUVycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvcnMnKTtcbmNvbnN0IHsgZXJyb3IsIHdhcm4sIHNlY3VyaXR5IH0gPSByZXF1aXJlKCcuLi91dGlscy9sb2dnZXInKTtcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZy9jb25maWcnKTtcblxuY29uc3QgaGFuZGxlQ2FzdEVycm9yREIgPSBlcnIgPT4ge1xuICBjb25zdCBtZXNzYWdlID0gYEludmFsaWQgJHtlcnIucGF0aH06ICR7ZXJyLnZhbHVlfWA7XG4gIHJldHVybiBjcmVhdGVFcnJvci52YWxpZGF0aW9uKG1lc3NhZ2UsIHsgZmllbGQ6IGVyci5wYXRoLCB2YWx1ZTogZXJyLnZhbHVlIH0pO1xufTtcblxuY29uc3QgaGFuZGxlVmFsaWRhdGlvbkVycm9yREIgPSBlcnIgPT4ge1xuICBjb25zdCBlcnJvcnMgPSBPYmplY3QudmFsdWVzKGVyci5lcnJvcnMpLm1hcChlbCA9PiAoe1xuICAgIGZpZWxkOiBlbC5wYXRoLFxuICAgIG1lc3NhZ2U6IGVsLm1lc3NhZ2UsXG4gICAgdmFsdWU6IGVsLnZhbHVlXG4gIH0pKTtcbiAgY29uc3QgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0IGRhdGEuICR7ZXJyb3JzLm1hcChlID0+IGUubWVzc2FnZSkuam9pbignLiAnKX1gO1xuICByZXR1cm4gY3JlYXRlRXJyb3IudmFsaWRhdGlvbihtZXNzYWdlLCBlcnJvcnMpO1xufTtcblxuY29uc3QgaGFuZGxlSldURXJyb3IgPSAoKSA9PlxuICBjcmVhdGVFcnJvci5hdXRoZW50aWNhdGlvbignSW52YWxpZCB0b2tlbi4gUGxlYXNlIGxvZyBpbiBhZ2FpbiEnKTtcblxuY29uc3QgaGFuZGxlSldURXhwaXJlZEVycm9yID0gKCkgPT5cbiAgY3JlYXRlRXJyb3IuYXV0aGVudGljYXRpb24oJ1lvdXIgdG9rZW4gaGFzIGV4cGlyZWQhIFBsZWFzZSBsb2cgaW4gYWdhaW4uJyk7XG5cbmNvbnN0IGhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCID0gZXJyID0+IHtcbiAgY29uc3QgZmllbGQgPSBPYmplY3Qua2V5cyhlcnIua2V5VmFsdWUpWzBdO1xuICBjb25zdCB2YWx1ZSA9IGVyci5rZXlWYWx1ZVtmaWVsZF07XG4gIGNvbnN0IG1lc3NhZ2UgPSBgJHtmaWVsZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGZpZWxkLnNsaWNlKDEpfSAnJHt2YWx1ZX0nIGFscmVhZHkgZXhpc3RzYDtcbiAgcmV0dXJuIGNyZWF0ZUVycm9yLmNvbmZsaWN0KG1lc3NhZ2UsIHsgZmllbGQsIHZhbHVlIH0pO1xufTtcblxuY29uc3QgaGFuZGxlTW9uZ29FcnJvciA9IGVyciA9PiB7XG4gIGlmIChlcnIuY29kZSA9PT0gMTEwMDApIHtcbiAgICByZXR1cm4gaGFuZGxlRHVwbGljYXRlRmllbGRzREIoZXJyKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRXJyb3IuZGF0YWJhc2UoJ0RhdGFiYXNlIG9wZXJhdGlvbiBmYWlsZWQnLCB7IGNvZGU6IGVyci5jb2RlIH0pO1xufTtcblxuY29uc3QgaGFuZGxlUmVkaXNFcnJvciA9IGVyciA9PiB7XG4gIHJldHVybiBjcmVhdGVFcnJvci5zZXJ2aWNlVW5hdmFpbGFibGUoJ0NhY2hlIHNlcnZpY2UgdW5hdmFpbGFibGUnLCB7XG4gICAgc2VydmljZTogJ3JlZGlzJyxcbiAgICBlcnJvcjogZXJyLm1lc3NhZ2VcbiAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVSYXRlTGltaXRFcnJvciA9IGVyciA9PiB7XG4gIHJldHVybiBjcmVhdGVFcnJvci50b29NYW55UmVxdWVzdHMoJ1RvbyBtYW55IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyJywge1xuICAgIHJldHJ5QWZ0ZXI6IGVyci5yZXRyeUFmdGVyLFxuICAgIGxpbWl0OiBlcnIubGltaXQsXG4gICAgcmVtYWluaW5nOiBlcnIucmVtYWluaW5nXG4gIH0pO1xufTtcblxuY29uc3QgaGFuZGxlTXVsdGVyRXJyb3IgPSBlcnIgPT4ge1xuICBpZiAoZXJyLmNvZGUgPT09ICdMSU1JVF9GSUxFX1NJWkUnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yLnZhbGlkYXRpb24oJ0ZpbGUgdG9vIGxhcmdlJywge1xuICAgICAgbWF4U2l6ZTogZXJyLmxpbWl0LFxuICAgICAgcmVjZWl2ZWRTaXplOiBlcnIuc2l6ZVxuICAgIH0pO1xuICB9XG4gIGlmIChlcnIuY29kZSA9PT0gJ0xJTUlUX0ZJTEVfQ09VTlQnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yLnZhbGlkYXRpb24oJ1RvbyBtYW55IGZpbGVzJywge1xuICAgICAgbWF4RmlsZXM6IGVyci5saW1pdCxcbiAgICAgIHJlY2VpdmVkRmlsZXM6IGVyci5maWxlcz8ubGVuZ3RoXG4gICAgfSk7XG4gIH1cbiAgaWYgKGVyci5jb2RlID09PSAnTElNSVRfVU5FWFBFQ1RFRF9GSUxFJykge1xuICAgIHJldHVybiBjcmVhdGVFcnJvci52YWxpZGF0aW9uKCdVbmV4cGVjdGVkIGZpbGUgZmllbGQnLCB7XG4gICAgICBmaWVsZDogZXJyLmZpZWxkXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUVycm9yLnZhbGlkYXRpb24oJ0ZpbGUgdXBsb2FkIGVycm9yJywgeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XG59O1xuXG5jb25zdCBzZW5kRXJyb3JEZXYgPSAoZXJyLCByZXMsIHJlcSkgPT4ge1xuICByZXMuc3RhdHVzKGVyci5zdGF0dXNDb2RlKS5qc29uKHtcbiAgICBzdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgY29kZTogZXJyLmNvZGUsXG4gICAgZGV0YWlsczogZXJyLmRldGFpbHMsXG4gICAgZXJyb3I6IHtcbiAgICAgIG5hbWU6IGVyci5uYW1lLFxuICAgICAgc3RhY2s6IGVyci5zdGFja1xuICAgIH0sXG4gICAgcmVxdWVzdElkOiByZXEucmVxdWVzdElkLFxuICAgIHRpbWVzdGFtcDogZXJyLnRpbWVzdGFtcCxcbiAgICBwYXRoOiByZXEucGF0aCxcbiAgICBtZXRob2Q6IHJlcS5tZXRob2RcbiAgfSk7XG59O1xuXG5jb25zdCBzZW5kRXJyb3JQcm9kID0gKGVyciwgcmVzLCByZXEpID0+IHtcbiAgLy8gT3BlcmF0aW9uYWwsIHRydXN0ZWQgZXJyb3I6IHNlbmQgbWVzc2FnZSB0byBjbGllbnRcbiAgaWYgKGVyci5pc09wZXJhdGlvbmFsKSB7XG4gICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzQ29kZSkuanNvbih7XG4gICAgICBzdGF0dXM6IGVyci5zdGF0dXMsXG4gICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgIGNvZGU6IGVyci5jb2RlLFxuICAgICAgZGV0YWlsczogZXJyLmRldGFpbHMsXG4gICAgICByZXF1ZXN0SWQ6IHJlcS5yZXF1ZXN0SWQsXG4gICAgICB0aW1lc3RhbXA6IGVyci50aW1lc3RhbXBcbiAgICB9KTtcbiAgfVxuICAvLyBQcm9ncmFtbWluZyBvciBvdGhlciB1bmtub3duIGVycm9yOiBkb24ndCBsZWFrIGVycm9yIGRldGFpbHNcbiAgZWxzZSB7XG4gICAgLy8gTG9nIGVycm9yIGZvciBkZWJ1Z2dpbmdcbiAgICBlcnJvcignVW5oYW5kbGVkIGVycm9yJywge1xuICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVyci5zdGFjayxcbiAgICAgIHJlcXVlc3RJZDogcmVxLnJlcXVlc3RJZCxcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgnVXNlci1BZ2VudCcpLFxuICAgICAgaXA6IHJlcS5pcCxcbiAgICAgIGJvZHk6IHJlcS5ib2R5LFxuICAgICAgcXVlcnk6IHJlcS5xdWVyeSxcbiAgICAgIHBhcmFtczogcmVxLnBhcmFtc1xuICAgIH0pO1xuXG4gICAgLy8gU2VuZCBnZW5lcmljIG1lc3NhZ2VcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICBtZXNzYWdlOiAnU29tZXRoaW5nIHdlbnQgdmVyeSB3cm9uZyEnLFxuICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICByZXF1ZXN0SWQ6IHJlcS5yZXF1ZXN0SWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICB9XG59O1xuXG4vLyBHbG9iYWwgZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxubW9kdWxlLmV4cG9ydHMgPSAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuXG4gIGVyci5zdGF0dXNDb2RlID0gZXJyLnN0YXR1c0NvZGUgfHwgNTAwO1xuICBlcnIuc3RhdHVzID0gZXJyLnN0YXR1cyB8fCAnZXJyb3InO1xuICBlcnIudGltZXN0YW1wID0gZXJyLnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIGVyci5yZXF1ZXN0SWQgPSByZXEucmVxdWVzdElkIHx8IHJlcS5pZCB8fCAndW5rbm93bic7XG5cbiAgLy8gSGFuZGxlIEpTT04gcGFyc2luZyBlcnJvcnNcbiAgaWYgKGVyciBpbnN0YW5jZW9mIFN5bnRheEVycm9yICYmIGVyci5zdGF0dXMgPT09IDQwMCAmJiAnYm9keScgaW4gZXJyKSB7XG4gICAgZXJyID0gY3JlYXRlRXJyb3IudmFsaWRhdGlvbignSW52YWxpZCBKU09OIGZvcm1hdCcsIHsgXG4gICAgICBvcmlnaW5hbEVycm9yOiBlcnIubWVzc2FnZSxcbiAgICAgIGNvZGU6ICdJTlZBTElEX0pTT04nXG4gICAgfSk7XG4gIH1cblxuICAvLyBIYW5kbGUgcGF5bG9hZCB0b28gbGFyZ2UgZXJyb3JzXG4gIGlmIChlcnIudHlwZSA9PT0gJ2VudGl0eS50b28ubGFyZ2UnKSB7XG4gICAgZXJyID0gY3JlYXRlRXJyb3IudmFsaWRhdGlvbignUmVxdWVzdCBwYXlsb2FkIHRvbyBsYXJnZScsIHtcbiAgICAgIGNvZGU6ICdQQVlMT0FEX1RPT19MQVJHRScsXG4gICAgICBsaW1pdDogZXJyLmxpbWl0XG4gICAgfSk7XG4gIH1cblxuICAvLyBMb2cgYWxsIGVycm9ycyB3aXRoIGFwcHJvcHJpYXRlIGxldmVsXG4gIGlmIChlcnIuc3RhdHVzQ29kZSA+PSA1MDApIHtcbiAgICBlcnJvcignU2VydmVyIGVycm9yJywge1xuICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGNvbmZpZy5zZXJ2ZXIuaXNEZXZlbG9wbWVudCA/IGVyci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHJlcXVlc3RJZDogcmVxLnJlcXVlc3RJZCxcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIHN0YXR1c0NvZGU6IGVyci5zdGF0dXNDb2RlLFxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCdVc2VyLUFnZW50JyksXG4gICAgICBpcDogcmVxLmlwXG4gICAgfSk7XG5cbiAgICAvLyBBbGVydCBmb3IgY3JpdGljYWwgc2VydmVyIGVycm9yc1xuICAgIHdhcm4oJ0NSSVRJQ0FMIFNFUlZFUiBFUlJPUicsIHtcbiAgICAgIGVycm9yOiBlcnIubWVzc2FnZSxcbiAgICAgIHJlcXVlc3RJZDogcmVxLnJlcXVlc3RJZCxcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIHN0YXR1c0NvZGU6IGVyci5zdGF0dXNDb2RlLFxuICAgICAgaXA6IHJlcS5pcCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoZXJyLnN0YXR1c0NvZGUgPj0gNDAwKSB7XG4gICAgd2FybignQ2xpZW50IGVycm9yJywge1xuICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxuICAgICAgcmVxdWVzdElkOiByZXEucmVxdWVzdElkLFxuICAgICAgdXJsOiByZXEudXJsLFxuICAgICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgICAgc3RhdHVzQ29kZTogZXJyLnN0YXR1c0NvZGUsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICAgIGlwOiByZXEuaXBcbiAgICB9KTtcbiAgfVxuXG4gIC8vIExvZyBzZWN1cml0eS1yZWxhdGVkIGVycm9yc1xuICBpZiAoZXJyLnN0YXR1c0NvZGUgPT09IDQwMSB8fCBlcnIuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgd2FybignQXV0aGVudGljYXRpb24vQXV0aG9yaXphdGlvbiBlcnJvcicsIHtcbiAgICAgIGVycm9yOiBlcnIubWVzc2FnZSxcbiAgICAgIHJlcXVlc3RJZDogcmVxLnJlcXVlc3RJZCxcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIGlwOiByZXEuaXAsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKVxuICAgIH0pO1xuICB9XG4gIFxuICBpZiAoY29uZmlnLnNlcnZlci5pc0RldmVsb3BtZW50KSB7XG4gICAgc2VuZEVycm9yRGV2KGVyciwgcmVzLCByZXEpO1xuICB9IGVsc2Uge1xuICAgIGxldCBlcnJvciA9IHsgLi4uZXJyIH07XG4gICAgZXJyb3IubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuXG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIGVycm9yIHR5cGVzXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdDYXN0RXJyb3InKSB7XG4gICAgICBlcnJvciA9IGhhbmRsZUNhc3RFcnJvckRCKGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgICBlcnJvciA9IGhhbmRsZVZhbGlkYXRpb25FcnJvckRCKGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlSldURXJyb3IoKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlSldURXhwaXJlZEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvci5uYW1lID09PSAnTW9uZ29FcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlTW9uZ29FcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvci5uYW1lID09PSAnTW9uZ29TZXJ2ZXJFcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlTW9uZ29FcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvci5uYW1lID09PSAnUmVkaXNFcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlUmVkaXNFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvci5uYW1lID09PSAnUmF0ZUxpbWl0RXJyb3InKSB7XG4gICAgICBlcnJvciA9IGhhbmRsZVJhdGVMaW1pdEVycm9yKGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdNdWx0ZXJFcnJvcicpIHtcbiAgICAgIGVycm9yID0gaGFuZGxlTXVsdGVyRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIHNlbmRFcnJvclByb2QoZXJyb3IsIHJlcywgcmVxKTtcbiAgfVxufTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsUUFBUTtFQUFFQztBQUFZLENBQUMsR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQzVELE1BQU07RUFBRUMsS0FBSztFQUFFQyxJQUFJO0VBQUVDO0FBQVMsQ0FBQyxHQUFHSCxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDNUQsTUFBTUksTUFBTSxHQUFHSixPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFFMUMs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QUU7SUFDL0IvQixZQUFZLENBQUMzQyxHQUFHLEVBQUU0QyxHQUFHLEVBQUVDLEdBQUcsQ0FBQztFQUM3QixDQUFDLE1BQU07SUFDTCxJQUFJbEQsS0FBSyxHQUFHO01BQUUsR0FBR0s7SUFBSSxDQUFDO0lBQ3RCTCxLQUFLLENBQUNNLE9BQU8sR0FBR0QsR0FBRyxDQUFDQyxPQUFPOztJQUUzQjtJQUNBLElBQUlOLEtBQUssQ0FBQ3VELElBQUksS0FBSyxXQUFXLEVBQUU7TUFDOUJ2RCxLQUFLLEdBQUdJLGlCQUFpQixDQUFDSixLQUFLLENBQUM7SUFDbEM7SUFDQSxJQUFJQSxLQUFLLENBQUN1RCxJQUFJLEtBQUssaUJBQWlCLEVBQUU7TUFDcEN2RCxLQUFLLEdBQUdXLHVCQUF1QixDQUFDWCxLQUFLLENBQUM7SUFDeEM7SUFDQSxJQUFJQSxLQUFLLENBQUN1RCxJQUFJLEtBQUssbUJBQW1CLEVBQUU7TUFDdEN2RCxLQUFLLEdBQUdtQixjQUFjLENBQUMsQ0FBQztJQUMxQjtJQUNBLElBQUluQixLQUFLLENBQUN1RCxJQUFJLEtBQUssbUJBQW1CLEVBQUU7TUFDdEN2RCxLQUFLLEdBQUdxQixxQkFBcUIsQ0FBQyxDQUFDO0lBQ2pDO0lBQ0EsSUFBSXJCLEtBQUssQ0FBQ3VELElBQUksS0FBSyxZQUFZLEVBQUU7TUFDL0J2RCxLQUFLLEdBQUc2QixnQkFBZ0IsQ0FBQzdCLEtBQUssQ0FBQztJQUNqQztJQUNBLElBQUlBLEtBQUssQ0FBQ3VELElBQUksS0FBSyxrQkFBa0IsRUFBRTtNQUNyQ3ZELEtBQUssR0FBRzZCLGdCQUFnQixDQUFDN0IsS0FBSyxDQUFDO0lBQ2pDO0lBQ0EsSUFBSUEsS0FBSyxDQUFDdUQsSUFBSSxLQUFLLFlBQVksRUFBRTtNQUMvQnZELEtBQUssR0FBR2dDLGdCQUFnQixDQUFDaEMsS0FBSyxDQUFDO0lBQ2pDO0lBQ0EsSUFBSUEsS0FBSyxDQUFDdUQsSUFBSSxLQUFLLGdCQUFnQixFQUFFO01BQ25DdkQsS0FBSyxHQUFHbUMsb0JBQW9CLENBQUNuQyxLQUFLLENBQUM7SUFDckM7SUFDQSxJQUFJQSxLQUFLLENBQUN1RCxJQUFJLEtBQUssYUFBYSxFQUFFO01BQ2hDdkQsS0FBSyxHQUFHd0MsaUJBQWlCLENBQUN4QyxLQUFLLENBQUM7SUFDbEM7SUFFQTRELGFBQWEsQ0FBQzVELEtBQUssRUFBRWlELEdBQUcsRUFBRUMsR0FBRyxDQUFDO0VBQ2hDO0FBQ0YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==