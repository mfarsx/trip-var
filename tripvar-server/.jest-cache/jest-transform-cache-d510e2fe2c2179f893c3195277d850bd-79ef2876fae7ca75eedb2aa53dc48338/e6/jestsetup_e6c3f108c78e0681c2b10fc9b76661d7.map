{"version":3,"names":["_getJestObj","mock","mockRedis","get","jest","fn","mockResolvedValue","set","del","exists","expire","flushall","ping","quit","publish","subscribe","unsubscribe","pipeline","mockReturnThis","exec","on","connect","disconnect","status","Redis","default","createClient","connectRedis","disconnectRedis","getRedisClient","redisUtils","deleteCache","getCache","setCache","info","error","warn","debug","require","process","env","NODE_ENV","JWT_SECRET","JWT_EXPIRES_IN","LOG_LEVEL","REDIS_URL","setTimeout"],"sources":["jest.setup.js"],"sourcesContent":["// Global Jest setup for Tripvar Server Tests\n\n// Mock Redis before any other imports\njest.mock('ioredis', () => {\n  const mockRedis = {\n    get: jest.fn().mockResolvedValue(null),\n    set: jest.fn().mockResolvedValue('OK'),\n    del: jest.fn().mockResolvedValue(1),\n    exists: jest.fn().mockResolvedValue(0),\n    expire: jest.fn().mockResolvedValue(1),\n    flushall: jest.fn().mockResolvedValue('OK'),\n    ping: jest.fn().mockResolvedValue('PONG'),\n    quit: jest.fn().mockResolvedValue('OK'),\n    publish: jest.fn().mockResolvedValue(1),\n    subscribe: jest.fn().mockResolvedValue(1),\n    unsubscribe: jest.fn().mockResolvedValue(1),\n    pipeline: jest.fn(() => ({\n      get: jest.fn().mockReturnThis(),\n      set: jest.fn().mockReturnThis(),\n      del: jest.fn().mockReturnThis(),\n      exec: jest.fn().mockResolvedValue([])\n    })),\n    on: jest.fn(),\n    connect: jest.fn().mockResolvedValue(),\n    disconnect: jest.fn().mockResolvedValue(),\n    status: 'ready'\n  };\n\n  return {\n    Redis: jest.fn(() => mockRedis),\n    default: jest.fn(() => mockRedis),\n    createClient: jest.fn(() => mockRedis)\n  };\n});\n\n// Mock Redis utilities\njest.mock('../config/redis', () => ({\n  connectRedis: jest.fn().mockResolvedValue(),\n  disconnectRedis: jest.fn().mockResolvedValue(),\n  getRedisClient: jest.fn(() => ({\n    get: jest.fn().mockResolvedValue(null),\n    set: jest.fn().mockResolvedValue('OK'),\n    del: jest.fn().mockResolvedValue(1),\n    exists: jest.fn().mockResolvedValue(0),\n    expire: jest.fn().mockResolvedValue(1),\n    flushall: jest.fn().mockResolvedValue('OK'),\n    ping: jest.fn().mockResolvedValue('PONG'),\n    quit: jest.fn().mockResolvedValue('OK'),\n    status: 'ready'\n  })),\n  redisUtils: {\n    deleteCache: jest.fn().mockResolvedValue(true),\n    getCache: jest.fn().mockResolvedValue(null),\n    setCache: jest.fn().mockResolvedValue('OK'),\n    exists: jest.fn().mockResolvedValue(false),\n    expire: jest.fn().mockResolvedValue(true),\n    flushall: jest.fn().mockResolvedValue('OK')\n  }\n}));\n\n// Mock logger to reduce noise in tests\njest.mock('../utils/logger', () => ({\n  info: jest.fn(),\n  error: jest.fn(),\n  warn: jest.fn(),\n  debug: jest.fn()\n}));\n\n// Set test environment variables\nprocess.env.NODE_ENV = 'test';\nprocess.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\nprocess.env.JWT_EXPIRES_IN = '1h';\nprocess.env.LOG_LEVEL = 'error';\nprocess.env.REDIS_URL = 'redis://localhost:6379';\n\n// Increase timeout for tests\njest.setTimeout(30000);"],"mappings":"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","ignoreList":[]}